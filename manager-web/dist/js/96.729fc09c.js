"use strict";(self.webpackChunkxiaozhi=self.webpackChunkxiaozhi||[]).push([[96],{2967:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=i(7797),s={name:"DictDataDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增字典数据"},dictData:{type:Object,default:()=>({})},dictTypeId:{type:[Number,String],default:null}},data(){return{dialogVisible:this.visible,form:{id:null,dictTypeId:null,dictLabel:"",dictValue:"",sort:0},rules:{dictLabel:[{required:!0,message:"请输入字典标签",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典值",trigger:"blur"}]}}},watch:{dictData:{handler(t){t&&(this.form={...t})},immediate:!0},dictTypeId:{handler(t){t&&(this.form.dictTypeId=t)},immediate:!0},visible(t){this.dialogVisible=t},dialogVisible(t){this.$emit("update:visible",t)}},methods:{handleClose(){this.dialogVisible=!1,this.resetForm()},resetForm(){this.form={id:null,dictTypeId:this.dictTypeId,dictLabel:"",dictValue:"",sort:0},this.$refs.form?.resetFields()},handleSave(){this.$refs.form.validate((t=>{t&&this.$emit("save",this.form)}))}}},l=i(1656),c=(0,l.A)(s,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"字典标签",prop:"dictLabel"}},[e("el-input",{attrs:{placeholder:"请输入字典标签"},model:{value:t.form.dictLabel,callback:function(e){t.$set(t.form,"dictLabel",e)},expression:"form.dictLabel"}})],1),e("el-form-item",{attrs:{label:"字典值",prop:"dictValue"}},[e("el-input",{attrs:{placeholder:"请输入字典值"},model:{value:t.form.dictValue,callback:function(e){t.$set(t.form,"dictValue",e)},expression:"form.dictValue"}})],1),e("el-form-item",{attrs:{label:"排序",prop:"sort"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:999},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")])],1)],1)}),[],!1,null,"b48c2f4a",null).exports,n={name:"DictTypeDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"新增字典类型"},dictTypeData:{type:Object,default:()=>({})}},data(){return{dialogVisible:this.visible,form:{id:null,dictName:"",dictType:""},rules:{dictName:[{required:!0,message:"请输入字典类型名称",trigger:"blur"}],dictType:[{required:!0,message:"请输入字典类型编码",trigger:"blur"}]}}},watch:{visible(t){this.dialogVisible=t},dialogVisible(t){this.$emit("update:visible",t)},dictTypeData:{handler(t){t&&(this.form={...t})},immediate:!0}},methods:{handleClose(){this.dialogVisible=!1,this.resetForm()},resetForm(){this.form={id:null,dictName:"",dictType:""},this.$refs.form?.resetFields()},handleSave(){this.$refs.form.validate((t=>{t&&this.$emit("save",this.form)}))}}},o=(0,l.A)(n,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"字典类型名称",prop:"dictName"}},[e("el-input",{attrs:{placeholder:"请输入字典类型名称"},model:{value:t.form.dictName,callback:function(e){t.$set(t.form,"dictName",e)},expression:"form.dictName"}})],1),e("el-form-item",{attrs:{label:"字典类型编码",prop:"dictType"}},[e("el-input",{attrs:{placeholder:"请输入字典类型编码"},model:{value:t.form.dictType,callback:function(e){t.$set(t.form,"dictType",e)},expression:"form.dictType"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")])],1)],1)}),[],!1,null,"688ac52f",null).exports,d=i(7853),r=i(9145),p={name:"DictManagement",components:{HeaderBar:d.A,DictTypeDialog:o,DictDataDialog:c,VersionFooter:r.A},data(){return{dictTypeList:[],dictTypeLoading:!1,selectedDictType:null,selectedDictTypes:[],dictTypeDialogVisible:!1,dictTypeDialogTitle:"新增字典类型",dictTypeForm:{id:null,dictName:"",dictType:""},dictDataList:[],dictDataLoading:!1,isAllDictDataSelected:!1,dictDataDialogVisible:!1,dictDataDialogTitle:"新增字典数据",dictDataForm:{id:null,dictTypeId:null,dictLabel:"",dictValue:"",sort:0},search:"",pageSizeOptions:[10,20,50,100],currentPage:1,pageSize:10,total:0}},created(){this.loadDictTypeList()},methods:{loadDictTypeList(){this.dictTypeLoading=!0,a.A.getDictTypeList({page:1,limit:100,dictName:this.search},(({data:t})=>{0===t.code&&(this.dictTypeList=t.data.list,this.dictTypeList.length>0&&(this.selectedDictType=this.dictTypeList[0],this.loadDictDataList(this.dictTypeList[0].id),this.$nextTick((()=>{this.$refs.dictTypeTable.setCurrentRow(this.dictTypeList[0])})))),this.dictTypeLoading=!1}))},handleDictTypeRowClick(t){this.selectedDictType=t,this.loadDictDataList(t.id),this.$refs.dictTypeTable.setCurrentRow(t)},handleDictTypeSelectionChange(t){this.selectedDictTypes=t},tableRowClassName({row:t}){return t===this.selectedDictType?"current-row":""},showAddDictTypeDialog(){this.dictTypeDialogTitle="新增字典类型",this.dictTypeForm={id:null,dictName:"",dictType:""},this.dictTypeDialogVisible=!0},editDictType(t){this.dictTypeDialogTitle="编辑字典类型",this.dictTypeForm={...t},this.dictTypeDialogVisible=!0},saveDictType(t){(t.id?a.A.updateDictType:a.A.addDictType)(t,(({data:t})=>{0===t.code&&(this.$message.success("保存成功"),this.dictTypeDialogVisible=!1,this.loadDictTypeList())}))},batchDeleteDictType(){0!==this.selectedDictTypes.length?this.$confirm("确定要删除选中的字典类型吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=this.selectedDictTypes.map((t=>t.id));a.A.deleteDictType(t,(({data:t})=>{0===t.code&&(this.$message.success("删除成功"),this.loadDictTypeList())}))})):this.$message.warning("请选择要删除的字典类型")},loadDictDataList(t){t&&(this.dictDataLoading=!0,a.A.getDictDataList({dictTypeId:t,page:this.currentPage,limit:this.pageSize,dictLabel:this.search,dictValue:""},(({data:t})=>{0===t.code?(this.dictDataList=t.data.list.map((t=>({...t,selected:!1}))),this.total=t.data.total):this.$message.error(t.msg||"获取字典数据失败"),this.dictDataLoading=!1})))},selectAllDictData(){this.isAllDictDataSelected=!this.isAllDictDataSelected,this.dictDataList.forEach((t=>{t.selected=this.isAllDictDataSelected}))},showAddDictDataDialog(){this.selectedDictType?(this.dictDataDialogTitle="新增字典数据",this.dictDataForm={id:null,dictTypeId:this.selectedDictType.id,dictLabel:"",dictValue:"",sort:0},this.dictDataDialogVisible=!0):this.$message.warning("请先选择字典类型")},editDictData(t){this.dictDataDialogTitle="编辑字典数据",this.dictDataForm={...t},this.dictDataDialogVisible=!0},saveDictData(t){(t.id?a.A.updateDictData:a.A.addDictData)(t,(({data:e})=>{0===e.code&&(this.$message.success("保存成功"),this.dictDataDialogVisible=!1,this.loadDictDataList(t.dictTypeId))}))},deleteDictData(t){this.$confirm("确定要删除该字典数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.A.deleteDictData([t.id],(({data:e})=>{0===e.code&&(this.$message.success("删除成功"),this.loadDictDataList(t.dictTypeId))}))}))},batchDeleteDictData(){const t=this.dictDataList.filter((t=>t.selected));0!==t.length?this.$confirm(`确定要删除选中的${t.length}个字典数据吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=t.map((t=>t.id));a.A.deleteDictData(e,(({data:t})=>{0===t.code&&(this.$message.success("删除成功"),this.loadDictDataList(this.selectedDictType.id))}))})):this.$message.warning("请选择要删除的字典数据")},handleSearch(){this.selectedDictType?(this.currentPage=1,this.loadDictDataList(this.selectedDictType.id)):this.$message.warning("请先选择字典类型")},handlePageSizeChange(t){this.pageSize=t,this.currentPage=1,this.loadDictDataList(this.selectedDictType?.id)},goFirst(){this.currentPage=1,this.loadDictDataList(this.selectedDictType?.id)},goPrev(){this.currentPage>1&&(this.currentPage--,this.loadDictDataList(this.selectedDictType?.id))},goNext(){this.currentPage<this.pageCount&&(this.currentPage++,this.loadDictDataList(this.selectedDictType?.id))},goToPage(t){this.currentPage=t,this.loadDictDataList(this.selectedDictType?.id)}},computed:{pageCount(){return Math.ceil(this.total/this.pageSize)},visiblePages(){const t=[];let e=Math.max(1,this.currentPage-1),i=Math.min(this.pageCount,e+3-1);i-e+1<3&&(e=Math.max(1,i-3+1));for(let a=e;a<=i;a++)t.push(a);return t}}},u=(0,l.A)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"welcome"},[e("HeaderBar"),e("div",{staticClass:"operation-bar"},[e("h2",{staticClass:"page-title"},[t._v("字典管理")]),e("div",{staticClass:"action-group"},[e("div",{staticClass:"search-group"},[e("el-input",{staticClass:"search-input",staticStyle:{width:"240px"},attrs:{placeholder:"请输入字典值标签查询",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("el-button",{staticClass:"btn-search",on:{click:t.handleSearch}},[t._v(" 搜索 ")])],1)])]),e("div",{staticClass:"main-wrapper"},[e("div",{staticClass:"content-panel"},[e("div",{staticClass:"dict-type-panel"},[e("div",{staticClass:"dict-type-header"},[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showAddDictTypeDialog}},[t._v("新增字典类型")]),e("el-button",{attrs:{type:"danger",size:"mini",disabled:0===t.selectedDictTypes.length},on:{click:t.batchDeleteDictType}},[t._v(" 批量删除字典类型 ")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dictTypeLoading,expression:"dictTypeLoading"}],ref:"dictTypeTable",staticClass:"dict-type-table",staticStyle:{width:"100%"},attrs:{data:t.dictTypeList,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.7)","row-class-name":t.tableRowClassName},on:{"row-click":t.handleDictTypeRowClick,"selection-change":t.handleDictTypeSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{label:"字典类型名称",prop:"dictName",align:"center"}}),e("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.editDictType(i.row)}}},[t._v("编辑")])]}}])})],1)],1),e("div",{staticClass:"content-area"},[e("el-card",{staticClass:"dict-data-card",attrs:{shadow:"never"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dictDataLoading,expression:"dictDataLoading"}],ref:"dictDataTable",staticClass:"data-table",staticStyle:{width:"100%"},attrs:{data:t.dictDataList,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.7)","header-row-class-name":"table-header"}},[e("el-table-column",{attrs:{label:"选择",align:"center",width:"55"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-checkbox",{model:{value:i.row.selected,callback:function(e){t.$set(i.row,"selected",e)},expression:"scope.row.selected"}})]}}])}),e("el-table-column",{attrs:{label:"字典标签",prop:"dictLabel",align:"center"}}),e("el-table-column",{attrs:{label:"字典值",prop:"dictValue",align:"center"}}),e("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{staticClass:"edit-btn",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editDictData(i.row)}}},[t._v(" 修改 ")]),e("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.deleteDictData(i.row)}}},[t._v(" 删除 ")])]}}])})],1),e("div",{staticClass:"table-footer"},[e("div",{staticClass:"batch-actions"},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.selectAllDictData}},[t._v(" "+t._s(t.isAllDictDataSelected?"取消全选":"全选")+" ")]),e("el-button",{staticClass:"add-btn",attrs:{type:"success",size:"mini"},on:{click:t.showAddDictDataDialog}},[t._v(" 新增字典数据 ")]),e("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:t.batchDeleteDictData}},[t._v(" 批量删除字典数据 ")])],1),e("div",{staticClass:"custom-pagination"},[e("el-select",{staticClass:"page-size-select",on:{change:t.handlePageSizeChange},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.pageSizeOptions,(function(t){return e("el-option",{key:t,attrs:{label:`${t}条/页`,value:t}})})),1),e("button",{staticClass:"pagination-btn",attrs:{disabled:1===t.currentPage},on:{click:t.goFirst}},[t._v(" 首页 ")]),e("button",{staticClass:"pagination-btn",attrs:{disabled:1===t.currentPage},on:{click:t.goPrev}},[t._v(" 上一页 ")]),t._l(t.visiblePages,(function(i){return e("button",{key:i,staticClass:"pagination-btn",class:{active:i===t.currentPage},on:{click:function(e){return t.goToPage(i)}}},[t._v(" "+t._s(i)+" ")])})),e("button",{staticClass:"pagination-btn",attrs:{disabled:t.currentPage===t.pageCount},on:{click:t.goNext}},[t._v(" 下一页 ")]),e("span",{staticClass:"total-text"},[t._v("共"+t._s(t.total)+"条记录")])],2)])],1)],1)])]),e("DictTypeDialog",{attrs:{visible:t.dictTypeDialogVisible,title:t.dictTypeDialogTitle,dictTypeData:t.dictTypeForm},on:{"update:visible":function(e){t.dictTypeDialogVisible=e},save:t.saveDictType}}),e("DictDataDialog",{attrs:{visible:t.dictDataDialogVisible,title:t.dictDataDialogTitle,dictData:t.dictDataForm,dictTypeId:t.selectedDictType?.id},on:{"update:visible":function(e){t.dictDataDialogVisible=e},save:t.saveDictData}}),e("el-footer",{staticStyle:{"flex-shrink":"unset"}},[e("version-footer")],1)],1)}),[],!1,null,"09fe1ec2",null),h=u.exports},9145:function(t,e,i){i.d(e,{A:function(){return s}});var a={name:"VersionFooter",computed:{...(0,i(5353).aH)({version:t=>t.pubConfig.version,name:t=>t.pubConfig.name,beianIcpNum:t=>t.pubConfig.beianIcpNum,beianGaNum:t=>t.pubConfig.beianGaNum,year:t=>t.pubConfig.year})},mounted(){this.$store.dispatch("fetchPubConfig")}},s=(0,i(1656).A)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"copyright"},[e("div",{staticClass:"footer-content"},[e("span",[t._v(t._s(t.year)+" "+t._s(t.name)+" "+t._s(t.version))]),"null"!==t.beianGaNum?["null"!==t.beianIcpNum||t.name?e("span",[t._v("|")]):t._e(),e("a",{staticClass:"beian-link",attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="+t.beianGaNum,target:"_blank",rel:"noopener"}},[e("img",{staticClass:"beian-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAACXlBMVEUAAADax4rGxqP556zmsVD/6KXu5JvwvFPglEFnY3nnpEjosU1+XFTmuVfu13Hrv1jpsFa1k3mne2HlvnPdqmPqz3fu3YrJoWv04J/mz5z246aSi3i2p2/0zGj82WDrtFjar1O7klO4dkfimUJcWnbho0rgr1vntFfmvFflvGOZdFKXZkOUemnmv2XkuWWVe2ziqlXnt1Tr0HDpwl6ObmCkbEKqhVyOc2jdoVHmuljfrmDq0nPapWDUnErqy3XjtWXesXLrzHjz34rqzYfmw3fy4YrqyYDevW/dzoTIhkndsXLRsIneuHjlyIzQroTjuXjlyYfktWvw2prhvoHTmGfx45j3773TuYT/25LdijyKf321oXU+Nm3cumXfuWLtwlzpwVz40FvpvlvqvFfouFXjrlHipEjcmEfknEXPbzfbZyzZQR/YMBrWKBrhJhLdHxDTGg5HV4xBT4YYKYaWk4SDgYIWIYBybH0qLn1KS3tlZHpNS3WGfHIcHXEwLHAnF28rKW07NGuzn2pNQ2ruzWnDrGnuy2jryGjAnGgoH2j1x2RCNGPcrmIsEGGQdl/pu17YtV7FoV3muVxoRVzWqFvSmVp2SVbyw1XbkVTuvFPfo1PgmVPpt1LcnFLWkVLlp1F7W1HpsU92QE5oMUtFAUrpqUjnjUFOAEHUgz+DUj14FzvbczieMTdhATfodjXWcDXcbjXVcTS/Xi/hay7WXS3cWS3vYyvaVSrUVymnJSjXSyeKDSbNSiWfHCPMTyLFQiHkSR/lPxvVLRrPLBnUJRfUHhbaJxXVGxTZJxPNFhBdOhm/AAAAWXRSTlMABQIU/hIJ/v79/Pj29PPx4cC6s7CNfmxZWRv+/v7+/v7+/v78/Pr6+fPz8vHq6ujl5eTj4ODe2NTQzMW6ubKsnJeQkJCJiIOBgX9ubGpoW1lMREM0JR8dDgvYx1gAAAE7SURBVBjTYgADJmZJQUFJZiYGOGD2EzLV1jIT8paCibCJ86zctGPD1D4ecUaICKuPyYLMYznZOfNqzP0jwEJBOt1KB4/mHjqZ3dGsHwxW5M4Zk5l/PPdIQcGMShUPVqBlgQLlMSvyDq+P3HVidjWnkQQTA5MXV1SFYtb+jZGrl02si2J3Y2JgFMmILl68efueLVvXLSqLXirCCBgDow1HT+GS/AP7srblLS+K5bIHCjmodpXUr929d+eaVb3SsuouQCHhufPjShsbJk/rrK2KW8hiBxRyVkvnkI9tnaDQJDNFOU1DDOjRMEfe9Mjpiewz5RIzZmmKMoPcKqGbkJqSkBSfnDqpXS+ACeRpJ76W/uSUpDlpLPFtfK5soLAKFbU05Odm4eblN7YWk4KEGWOIp62FgYCVsG84SAAAL7BaooX965sAAAAASUVORK5CYII=",alt:"备案图标"}}),e("span",{staticClass:"beian-text"},[t._v(t._s(t.beianGaNum))])])]:t._e(),"null"!==t.beianIcpNum?[t.name?e("span",[t._v("|")]):t._e(),e("a",{staticClass:"beian-link",attrs:{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"}},[e("span",{staticClass:"beian-text"},[t._v(t._s(t.beianIcpNum))])])]:t._e()],2)])}),[],!1,null,"1bdde94e",null).exports}}]);