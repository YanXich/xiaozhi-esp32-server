"use strict";(self.webpackChunkxiaozhi=self.webpackChunkxiaozhi||[]).push([[807],{7788:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var a=s(9237),i={name:"AddModelDialog",props:{visible:{type:Boolean,required:!0},modelType:{type:String,required:!0}},data(){return{saving:!1,providers:[],dialogVisible:!1,providersLoaded:!1,providerFields:[],currentProvider:null,formData:{modelName:"",modelCode:"",supplier:"",sort:1,docLink:"",remark:"",isEnabled:!0,isDefault:!0,configJson:{}}}},watch:{visible(e){this.dialogVisible=e,e?this.initConfigJson():this.resetForm()},"formData.supplier"(e){this.currentProvider=this.providers.find((t=>t.value===e)),this.providerFields=this.currentProvider?.fields||[],this.initDynamicConfig()}},computed:{dynamicCallInfoFields(){return this.providerFields},chunkedCallInfoFields(){const e=[];for(let t=0;t<this.dynamicCallInfoFields.length;t+=2)e.push(this.dynamicCallInfoFields.slice(t,t+2));return e}},methods:{loadProviders(){this.providersLoaded||a.A.model.getModelProviders(this.modelType,(e=>{this.providers=e.map((e=>({label:e.name,value:e.providerCode,fields:JSON.parse(e.fields||"[]").map((e=>({label:e.label,prop:e.key,type:"password"===e.type?"password":"text",placeholder:`请输入${e.label}`})))}))),this.providersLoaded=!0}))},initConfigJson(){const e={};this.providerFields.forEach((t=>{e[t.prop]=""})),this.formData.configJson={...e}},handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e),e||this.resetForm()},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},initDynamicConfig(){const e={};this.providerFields.forEach((t=>{e[t.prop]=this.formData.configJson[t.prop]||""})),this.formData.configJson=e},confirm(){if(this.saving=!0,!this.formData.supplier)return this.$message.error("请选择供应器"),void(this.saving=!1);const e={modelName:this.formData.modelName||"",modelCode:this.formData.modelCode||"",supplier:this.formData.supplier,sort:this.formData.sort||1,docLink:this.formData.docLink||"",remark:this.formData.remark||"",isEnabled:this.formData.isEnabled?1:0,isDefault:this.formData.isDefault?1:0,provideCode:this.formData.supplier,configJson:{...this.formData.configJson,type:this.formData.supplier}};try{this.$emit("confirm",e),this.$emit("update:visible",!1),this.resetForm()}catch(e){console.error(e)}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={modelName:"",modelCode:"",supplier:"",sort:1,docLink:"",remark:"",isEnabled:!0,isDefault:!0,configJson:{}},this.providers=[],this.providersLoaded=!1,this.providerFields=[],this.currentProvider=null}}},l=s(1656),o=(0,l.A)(i,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"57%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" 添加模型 ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px"}},[t("div",{staticStyle:{"font-size":"20px","font-weight":"bold",color:"#3d4566"}},[e._v("模型信息")]),t("div",{staticStyle:{display:"flex","align-items":"center",gap:"20px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[e._v("是否启用")]),t("el-switch",{staticClass:"custom-switch",model:{value:e.formData.isEnabled,callback:function(t){e.$set(e.formData,"isEnabled",t)},expression:"formData.isEnabled"}})],1),t("div",{staticStyle:{display:"none","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[e._v("设为默认")]),t("el-switch",{staticClass:"custom-switch",model:{value:e.formData.isDefault,callback:function(t){e.$set(e.formData,"isDefault",t)},expression:"formData.isDefault"}})],1)])]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"模型名称",prop:"modelName"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入模型名称"},model:{value:e.formData.modelName,callback:function(t){e.$set(e.formData,"modelName",t)},expression:"formData.modelName"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"模型编码",prop:"modelCode"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入模型编码"},model:{value:e.formData.modelCode,callback:function(t){e.$set(e.formData,"modelCode",t)},expression:"formData.modelCode"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"供应器",prop:"supplier"}},[t("el-select",{staticClass:"custom-select custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{focus:e.loadProviders},model:{value:e.formData.supplier,callback:function(t){e.$set(e.formData,"supplier",t)},expression:"formData.supplier"}},e._l(e.providers,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"排序号",prop:"sortOrder"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{type:"number",placeholder:"请输入排序号"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1),t("el-form-item",{staticStyle:{"margin-bottom":"27px"},attrs:{label:"文档地址",prop:"docLink"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入文档地址"},model:{value:e.formData.docLink,callback:function(t){e.$set(e.formData,"docLink",t)},expression:"formData.docLink"}})],1),t("el-form-item",{staticClass:"prop-remark",attrs:{label:"备注",prop:"remark"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{type:"textarea",rows:3,placeholder:"请输入模型备注",autosize:{minRows:3,maxRows:5}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),t("div",{staticStyle:{"font-size":"20px","font-weight":"bold",color:"#3d4566","margin-bottom":"15px"}},[e._v("调用信息")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData.configJson,"label-width":"auto","label-position":"left"}},[e._l(e.chunkedCallInfoFields,(function(s,a){return[t("div",{key:a,staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},e._l(s,(function(s){return t("el-form-item",{key:s.prop,staticStyle:{flex:"1"},attrs:{label:s.label,prop:s.prop}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:s.placeholder,type:s.type||"text","show-password":"password"===s.type},model:{value:e.formData.configJson[s.prop],callback:function(t){e.$set(e.formData.configJson,s.prop,t)},expression:"formData.configJson[field.prop]"}})],1)})),1)]}))],2)],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,null,null).exports,r=s(7853),n={name:"ModelEditDialog",props:{visible:{type:Boolean,default:!1},modelData:{type:Object,default:()=>({}),validator:e=>"object"==typeof e&&!Array.isArray(e)},modelType:{type:String,required:!0}},data(){return{dialogVisible:this.visible,providers:[],providersLoaded:!1,saving:!1,allProvidersData:null,pendingProviderType:null,pendingModelData:null,dynamicCallInfoFields:[],fieldJsonMap:{},form:{id:"",modelType:"",modelCode:"",modelName:"",isDefault:!1,isEnabled:!1,docLink:"",remark:"",sort:0,configJson:{}}}},computed:{chunkedCallInfoFields(){const e=[];for(let t=0;t<this.dynamicCallInfoFields.length;t+=2)e.push(this.dynamicCallInfoFields.slice(t,t+2));return e}},watch:{modelType(){this.resetProviders(),this.loadProviders()},dialogVisible(e){this.$emit("update:visible",e),e?e&&this.modelData.id&&this.loadModelData():this.resetForm()},visible(e){this.dialogVisible=e,e&&this.loadProviders()},"form.configJson.type"(e){e&&this.providersLoaded&&this.loadProviderFields(e)}},methods:{resetForm(){this.form={id:"",modelType:"",modelCode:"",modelName:"",isDefault:!1,isEnabled:!1,docLink:"",remark:"",sort:0,configJson:{}},this.fieldJsonMap={}},resetProviders(){this.providers=[],this.providersLoaded=!1},loadModelData(){this.modelData.id&&a.A.model.getModelConfig(this.modelData.id,(({data:e})=>{if(0===e.code&&e.data){const t=e.data;this.pendingProviderType=t.configJson.type,this.pendingModelData=t,this.providersLoaded?this.loadProviderFields(t.configJson.type):this.loadProviders()}}))},handleSave(){this.saving=!0,Object.keys(this.fieldJsonMap).forEach((e=>{const t=this.validateJson(this.fieldJsonMap[e]);null!==t&&(this.form.configJson[e]=t)}));const e={id:this.modelData.id,modelCode:this.form.modelCode,modelName:this.form.modelName,isDefault:this.form.isDefault?1:0,isEnabled:this.form.isEnabled?1:0,docLink:this.form.docLink,remark:this.form.remark,sort:this.form.sort||0,configJson:{...this.form.configJson}};this.$emit("save",{provideCode:this.form.configJson.type,formData:e,done:()=>{this.saving=!1}}),setTimeout((()=>{this.saving=!1}),3e3)},loadProviders(){this.providersLoaded||a.A.model.getModelProviders(this.modelType,(e=>{this.providers=e.map((e=>({label:e.name,value:String(e.providerCode)}))),this.providersLoaded=!0,this.allProvidersData=e,this.pendingProviderType&&this.loadProviderFields(this.pendingProviderType)}))},loadProviderFields(e){if(this.allProvidersData){const t=this.allProvidersData.find((t=>t.providerCode===e));t&&(this.dynamicCallInfoFields=JSON.parse(t.fields||"[]").map((e=>({label:e.label,prop:e.key,type:"dict"===e.type?"json-textarea":"password"===e.type?"password":"text",placeholder:`请输入${e.label}`}))),this.pendingModelData&&this.pendingProviderType===e&&(this.processModelData(this.pendingModelData),this.pendingModelData=null,this.pendingProviderType=null))}},processModelData(e){let t=e.configJson||{};this.dynamicCallInfoFields.forEach((e=>{t.hasOwnProperty(e.prop)?"json-textarea"===e.type?(this.$set(this.fieldJsonMap,e.prop,this.formatJson(t[e.prop])),t[e.prop]=this.ensureObject(t[e.prop])):"string"!=typeof t[e.prop]&&(t[e.prop]=String(t[e.prop])):t[e.prop]=""})),this.form={id:e.id,modelType:e.modelType,modelCode:e.modelCode,modelName:e.modelName,isDefault:e.isDefault,isEnabled:e.isEnabled,docLink:e.docLink,remark:e.remark,sort:Number(e.sort)||0,configJson:{...t}}},handleJsonChange(e,t){const s=this.validateJson(t);null!==s&&(this.form.configJson[e]=s)},validateJson(e){try{const t=JSON.parse(e);return"object"!=typeof t||null===t||Array.isArray(t)?(this.$message.error({message:'必须输入字典格式（如 {"key":"value"}），保存则使用原数据',showClose:!0}),null):t}catch(e){return this.$message.error({message:'JSON格式错误（如 {"key":"value"}），保存则使用原数据',showClose:!0}),null}},formatJson(e){try{return JSON.stringify(e,null,2)}catch{return""}},ensureObject(e){return"object"==typeof e?e:{}}}},d=(0,l.A)(n,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"57%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" 修改模型 ")]),t("button",{staticClass:"custom-close-btn",on:{click:function(t){e.dialogVisible=!1}}},[e._v(" × ")]),t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px"}},[t("div",{staticStyle:{"font-size":"20px","font-weight":"bold",color:"#3d4566"}},[e._v("模型信息")]),t("div",{staticStyle:{display:"flex","align-items":"center",gap:"20px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[e._v("是否启用")]),t("el-switch",{staticClass:"custom-switch",attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.isEnabled,callback:function(t){e.$set(e.form,"isEnabled",t)},expression:"form.isEnabled"}})],1),t("div",{staticStyle:{display:"none","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[e._v("设为默认")]),t("el-switch",{staticClass:"custom-switch",attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.isDefault,callback:function(t){e.$set(e.form,"isDefault",t)},expression:"form.isDefault"}})],1)])]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{ref:"form",staticClass:"custom-form",attrs:{model:e.form,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"模型名称",prop:"name"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入模型名称"},model:{value:e.form.modelName,callback:function(t){e.$set(e.form,"modelName",t)},expression:"form.modelName"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"模型编码",prop:"code"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入模型编码"},model:{value:e.form.modelCode,callback:function(t){e.$set(e.form,"modelCode",t)},expression:"form.modelCode"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"供应器",prop:"supplier"}},[t("el-select",{staticClass:"custom-select custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{focus:e.loadProviders},model:{value:e.form.configJson.type,callback:function(t){e.$set(e.form.configJson,"type",t)},expression:"form.configJson.type"}},e._l(e.providers,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"排序号",prop:"sort"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{type:"number",placeholder:"请输入排序号"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",e._n(t))},expression:"form.sort"}})],1)],1),t("el-form-item",{staticStyle:{"margin-bottom":"27px"},attrs:{label:"文档地址",prop:"docUrl"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入文档地址"},model:{value:e.form.docLink,callback:function(t){e.$set(e.form,"docLink",t)},expression:"form.docLink"}})],1),t("el-form-item",{staticClass:"prop-remark",attrs:{label:"备注",prop:"remark"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{type:"textarea",rows:3,placeholder:"请输入模型备注",autosize:{minRows:3,maxRows:5}},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("div",{staticStyle:{"font-size":"20px","font-weight":"bold",color:"#3d4566","margin-bottom":"15px"}},[e._v("调用信息")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{ref:"callInfoForm",staticClass:"custom-form",attrs:{model:e.form.configJson,"label-width":"auto"}},[e._l(e.chunkedCallInfoFields,(function(s,a){return[t("div",{key:a,staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},e._l(s,(function(s){return t("el-form-item",{key:s.prop,staticStyle:{flex:"1"},attrs:{label:s.label,prop:s.prop}},["json-textarea"===s.type?[t("el-input",{staticClass:"custom-input-bg",attrs:{type:"textarea",rows:3,placeholder:"请输入JSON格式变量(示例:{'key':'value'})"},on:{change:t=>e.handleJsonChange(s.prop,t)},model:{value:e.fieldJsonMap[s.prop],callback:function(t){e.$set(e.fieldJsonMap,s.prop,t)},expression:"fieldJsonMap[field.prop]"}})]:t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:s.placeholder,type:s.type,"show-password":"password"===s.type},model:{value:e.form.configJson[s.prop],callback:function(t){e.$set(e.form.configJson,s.prop,t)},expression:"form.configJson[field.prop]"}})],2)})),1)]}))],2)],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.handleSave}},[e._v(" 保存 ")])],1)])}),[],!1,null,"64e63d3c",null).exports,c=s(5471),u={__name:"AudioPlayer",props:{audioUrl:String},setup(e){const t=e;(0,c.useCssVars)(((e,t)=>({"6a1b89c7":t.volume})));const s=(0,c.ref)(null),a=(0,c.ref)(null),i=(0,c.ref)(null),l=(0,c.ref)(!1),o=(0,c.ref)(0),r=(0,c.ref)(0),n=(0,c.ref)(0),d=(0,c.ref)(.7),u=(0,c.ref)(!1),m=(0,c.ref)(!1);let p=null;const h=e=>{const t=Math.floor(e||0);return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`},g=(0,c.computed)((()=>h(o.value))),f=(0,c.computed)((()=>h(r.value))),v=(0,c.computed)((()=>u.value||0===d.value?"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z":"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"));let b=!1;const y=e=>{if(!b)return;const t=document.querySelector(".progress-bar").getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100;w(s)},C=()=>{b=!1,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C)},w=e=>{const t=Math.min(Math.max(e,0),100);n.value=t,s.value.currentTime=t/100*r.value},D=()=>{(0,c.nextTick)((()=>{if(!a.value||!i.value)return;const e=a.value.getBoundingClientRect(),t=i.value,s=e.left+window.scrollX,l=e.top+window.scrollY;t.style.left=`${s+5}px`,t.style.top=l-85+"px"}))};return(0,c.onMounted)((()=>{s.value&&(s.value.volume=d.value),window.addEventListener("resize",D)})),(0,c.onUnmounted)((()=>{window.removeEventListener("resize",D)})),{__sfc:!0,props:t,audioRef:s,volumeButton:a,volumeSlider:i,isPlaying:l,currentTime:o,duration:r,progress:n,volume:d,isMuted:u,showVolumeSlider:m,volumeSliderHideTimer:p,formatTime:h,formattedCurrentTime:g,formattedDuration:f,volumeIconPath:v,togglePlay:()=>{l.value?s.value.pause():s.value.play(),l.value=!l.value},updateDuration:()=>{s.value&&(r.value=s.value.duration)},updateProgress:()=>{s.value?.duration&&(o.value=s.value.currentTime,n.value=o.value/r.value*100)},handleProgressClick:e=>{const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100;w(s)},toggleMute:()=>{u.value=!u.value,s.value.muted=u.value,u.value||0!==d.value||(d.value=.5,s.value.volume=.5)},handleVolumeChange:e=>{const t=parseFloat(e.target.value);s.value.volume=t,u.value=0===t},isDragging:b,startDrag:e=>{b=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",C),e.preventDefault()},handleDrag:y,stopDrag:C,seekToPercentage:w,startVolumeSliderHideTimer:()=>{p=setTimeout((()=>{m.value=!1}),300)},cancelVolumeSliderHideTimer:()=>{clearTimeout(p)},updateSliderPosition:D,handleVolumeMouseEnter:()=>{m.value=!0,D()}}}},m={components:{AudioPlayer:(0,l.A)(u,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"audio-container"},[t("audio",{ref:"audioRef",staticStyle:{display:"none"},attrs:{src:e.audioUrl},on:{timeupdate:s.updateProgress,loadedmetadata:s.updateDuration}}),t("div",{staticClass:"custom-controls"},[t("button",{staticClass:"play-btn",on:{click:s.togglePlay}},[t("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20"}},[t("path",{attrs:{fill:"#4362b3",d:s.isPlaying?"M6 3h3v14H6zm5 0h3v14h-3z":"M5 3l12 7-12 7z"}})])]),t("span",{staticClass:"time-display"},[e._v(e._s(s.formattedCurrentTime)+"/"+e._s(s.formattedDuration))]),t("div",{staticClass:"progress-container"},[t("div",{staticClass:"progress-bar",on:{click:s.handleProgressClick}},[t("div",{staticClass:"progress-track",style:{width:s.progress+"%"}}),t("div",{staticClass:"progress-thumb",style:{left:s.progress+"%"},on:{mousedown:s.startDrag}})])]),t("div",{ref:"volumeControl",staticClass:"volume-control"},[t("button",{ref:"volumeButton",staticClass:"volume-button",on:{click:s.toggleMute,mouseenter:s.handleVolumeMouseEnter,mouseleave:s.startVolumeSliderHideTimer}},[t("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 24 24"}},[t("path",{attrs:{fill:"currentColor",d:s.volumeIconPath}})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.showVolumeSlider,expression:"showVolumeSlider"}],ref:"volumeSlider",staticClass:"volume-slider-container",on:{mouseenter:s.cancelVolumeSliderHideTimer,mouseleave:s.startVolumeSliderHideTimer}},[t("div",{staticClass:"volume-slider-track"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.volume,expression:"volume"}],staticClass:"volume-slider",attrs:{type:"range",min:"0",max:"1",step:"0.1",orient:"vertical"},domProps:{value:s.volume},on:{input:s.handleVolumeChange,__r:function(e){s.volume=e.target.value}}}),t("div",{staticClass:"volume-slider-thumb",style:{bottom:100*s.volume+"%"}})])])])])])}),[],!1,null,"e2f4fabc",null).exports},props:{visible:{type:Boolean,default:!1},ttsModelId:{type:String,required:!0},modelConfig:{type:Object,default:null}},data(){return{localVisible:this.visible,searchQuery:"",editDialogVisible:!1,editVoiceData:{},ttsModels:[],currentPage:1,pageSize:1e4,total:0,isDragging:!1,startY:0,scrollTop:0,selectAll:!1,selectedRows:[],loading:!1,showReferenceColumns:!1}},watch:{visible(e){this.localVisible=e,e&&(this.currentPage=1,this.updateShowReferenceColumns(),this.loadData(),this.$nextTick((()=>{this.updateScrollbar()})))},modelConfig:{handler(e){this.updateShowReferenceColumns()},immediate:!0},filteredTtsModels(){this.$nextTick((()=>{this.updateScrollbar()}))}},computed:{filteredTtsModels(){return this.ttsModels.filter((e=>e.voiceName.toLowerCase().includes(this.searchQuery.toLowerCase())))}},mounted(){this.updateScrollbar(),window.addEventListener("resize",this.updateScrollbar),window.addEventListener("mouseup",this.stopDrag),window.addEventListener("mousemove",this.handleDrag)},beforeDestroy(){window.removeEventListener("resize",this.updateScrollbar),window.removeEventListener("mouseup",this.stopDrag),window.removeEventListener("mousemove",this.handleDrag)},methods:{updateShowReferenceColumns(){if(this.modelConfig&&this.modelConfig.configJson){const e=this.modelConfig.configJson.type;this.showReferenceColumns=["fishspeech","gpt_sovits_v2","gpt_sovits_v3"].includes(e)}else this.showReferenceColumns=!1},loadData(){this.loading=!0;const e={ttsModelId:this.ttsModelId,page:this.currentPage,limit:this.pageSize,name:this.searchQuery};a.A.timbre.getVoiceList(e,(e=>{0===e.code?(this.ttsModels=e.data.list.map((e=>({id:e.id||"",voiceCode:e.ttsVoice||"",voiceName:e.name||"未命名音色",languageType:e.languages||"",remark:e.remark||"",referenceAudio:e.referenceAudio||"",referenceText:e.referenceText||"",voiceDemo:e.voiceDemo||"",selected:!1,editing:!1,sort:Number(e.sort)}))).sort(((e,t)=>e.sort-t.sort)),this.total=e.total):this.$message.error({message:e.msg||"获取音色列表失败",showClose:!0}),this.loading=!1}),(e=>{console.error("加载失败:",e),this.$message.error({message:"加载音色数据失败",showClose:!0}),this.loading=!1}))},handleClose(){this.ttsModels=[],this.currentPage=1,this.total=0,this.selectAll=!1,this.searchQuery="",this.showReferenceColumns=!1,this.localVisible=!1,this.$emit("update:visible",!1)},updateScrollbar(){const e=this.$refs.tableContainer,t=this.$refs.scrollbarThumb,s=this.$refs.scrollbarTrack;if(!e||!t||!s)return;const{scrollHeight:a,clientHeight:i}=e,l=s.clientHeight,o=Math.max(i/a*l,20);t.style.height=`${o}px`,this.updateThumbPosition()},updateThumbPosition(){const e=this.$refs.tableContainer,t=this.$refs.scrollbarThumb,s=this.$refs.scrollbarTrack;if(!e||!t||!s)return;const{scrollHeight:a,clientHeight:i,scrollTop:l}=e,o=s.clientHeight,r=t.clientHeight,n=o-r,d=l/(a-i)*(o-r);t.style.top=`${Math.min(d,n)}px`},handleScroll(){const e=this.$refs.tableContainer;e.scrollTop+e.clientHeight>=e.scrollHeight-50&&this.currentPage*this.pageSize<this.total&&(this.currentPage++,this.loadData()),this.updateThumbPosition()},startDrag(e){this.isDragging=!0,this.startY=e.clientY,this.scrollTop=this.$refs.tableContainer.scrollTop,e.preventDefault()},stopDrag(){this.isDragging=!1},handleDrag(e){if(!this.isDragging)return;const t=this.$refs.tableContainer,s=this.$refs.scrollbarTrack,a=this.$refs.scrollbarThumb,i=e.clientY-this.startY,l=(s.clientHeight-a.clientHeight)/(t.scrollHeight-t.clientHeight);t.scrollTop=this.scrollTop+i/l},handleTrackClick(e){const t=this.$refs.tableContainer,s=this.$refs.scrollbarTrack,a=this.$refs.scrollbarThumb;if(!t||!s||!a)return;const i=s.getBoundingClientRect(),l=a.clientHeight,o=e.clientY-i.top-l/2,r=s.clientHeight,n=r-l,d=Math.max(0,Math.min(o,n));a.style.top=`${d}px`,t.scrollTop=d/(r-l)*(t.scrollHeight-t.clientHeight)},startEdit(e){e.editing=!0,this.$set(e,"originalData",{...e})},saveEdit(e){if(e.voiceCode&&e.voiceName&&e.languageType)try{const t={id:e.id,voiceCode:e.voiceCode,voiceName:e.voiceName,languageType:e.languageType,remark:e.remark,ttsModelId:this.ttsModelId,voiceDemo:e.voiceDemo||"",sort:e.sort};let s;this.showReferenceColumns&&(t.referenceAudio=e.referenceAudio,t.referenceText=e.referenceText),e.id?a.A.timbre.updateVoice(t,(t=>{s=t,this.handleResponse(s,e)})):a.A.timbre.saveVoice(t,(t=>{s=t,this.handleResponse(s,e)}))}catch(t){console.error("操作失败:",t),e.originalData&&(Object.assign(e,e.originalData),e.editing=!1,delete e.originalData),this.$message.error({message:"操作失败，请重试",showClose:!0})}else this.$message.error({message:"音色编码、音色名称和语言类型不能为空",showClose:!0})},handleResponse(e,t){0===e.code?(this.$message.success({message:t.id?"修改成功":"保存成功",showClose:!0}),t.editing=!1,delete t.originalData,this.loadData()):(t.originalData&&(Object.assign(t,t.originalData),t.editing=!1,delete t.originalData),this.$message.error({message:e.msg||(t.id?"修改失败":"保存失败"),showClose:!0}))},toggleSelectAll(){this.selectAll=!this.selectAll,this.filteredTtsModels.forEach((e=>{e.selected=this.selectAll}))},addNew(){if(this.ttsModels.some((e=>e.editing)))return void this.$message.warning("请先完成当前编辑再新增");const e={voiceCode:"",voiceName:"",languageType:"中文",voiceDemo:"",remark:"",referenceAudio:"",referenceText:"",selected:!1,editing:!0,sort:(this.ttsModels.length>0?Math.max(...this.ttsModels.map((e=>Number(e.sort)||0))):0)+1};this.ttsModels.unshift(e)},deleteRow(e){const t=Array.isArray(e)?e:[e];if(Array.isArray(e)&&0===e.length)return void this.$message.warning("请先选择需要删除的音色");const s=t.length;this.$confirm(`确定要删除选中的${s}个音色吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",distinguishCancelAndClose:!0}).then((()=>{const e=t.map((e=>e.id));e.some((e=>!e))?this.$message.error("存在无效的音色ID"):a.A.timbre.deleteVoice(e,(({data:e})=>{0===e.code?(this.$message.success({message:`成功删除${s}个参数`,showClose:!0}),this.loadData()):this.$message.error({message:e.msg||"删除失败，请重试",showClose:!0})}))})).catch((e=>{"cancel"===e?this.$message({type:"info",message:"已取消删除操作",duration:1e3}):this.$message({type:"info",message:"操作已关闭",duration:1e3})}))},isValidAudioUrl(e){return e&&(e.endsWith(".mp3")||e.endsWith(".ogg")||e.endsWith(".wav"))}}},p=(0,l.A)(m,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.localVisible,width:"90%","show-close":!1,"append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(t){e.localVisible=t},close:e.handleClose}},[t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticClass:"scroll-wrapper"},[t("div",{ref:"tableContainer",staticClass:"table-container",on:{scroll:e.handleScroll}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"data-table",staticStyle:{width:"100%"},attrs:{data:e.filteredTtsModels,"header-row-class-name":"table-header",fit:!0,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-table-column",{attrs:{label:"选择",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-checkbox",{model:{value:s.row.selected,callback:function(t){e.$set(s.row,"selected",t)},expression:"scope.row.selected"}})]}}])}),t("el-table-column",{attrs:{label:"音色编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{model:{value:s.row.voiceCode,callback:function(t){e.$set(s.row,"voiceCode",t)},expression:"scope.row.voiceCode"}}):t("span",[e._v(e._s(s.row.voiceCode))])]}}])}),t("el-table-column",{attrs:{label:"音色名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{model:{value:s.row.voiceName,callback:function(t){e.$set(s.row,"voiceName",t)},expression:"scope.row.voiceName"}}):t("span",[e._v(e._s(s.row.voiceName))])]}}])}),t("el-table-column",{attrs:{label:"语言类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{model:{value:s.row.languageType,callback:function(t){e.$set(s.row,"languageType",t)},expression:"scope.row.languageType"}}):t("span",[e._v(e._s(s.row.languageType))])]}}])}),e.showReferenceColumns?e._e():t("el-table-column",{attrs:{label:"试听",align:"center","class-name":"audio-column"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"custom-audio-container"},[s.row.editing?t("el-input",{staticClass:"audio-input",attrs:{placeholder:"请输入MP3地址"},model:{value:s.row.voiceDemo,callback:function(t){e.$set(s.row,"voiceDemo",t)},expression:"scope.row.voiceDemo"}}):e.isValidAudioUrl(s.row.voiceDemo)?t("AudioPlayer",{attrs:{audioUrl:s.row.voiceDemo}}):e._e()],1)]}}],null,!1,214128844)}),e.showReferenceColumns?e._e():t("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{staticClass:"remark-input",attrs:{type:"textarea",rows:1,autosize:"",placeholder:"这里是备注"},model:{value:s.row.remark,callback:function(t){e.$set(s.row,"remark",t)},expression:"scope.row.remark"}}):t("span",[e._v(e._s(s.row.remark))])]}}],null,!1,2553606124)}),e.showReferenceColumns?t("el-table-column",{attrs:{label:"克隆音频路径",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{attrs:{placeholder:"这里是克隆音频路径"},model:{value:s.row.referenceAudio,callback:function(t){e.$set(s.row,"referenceAudio",t)},expression:"scope.row.referenceAudio"}}):t("span",[e._v(e._s(s.row.referenceAudio))])]}}],null,!1,2771853560)}):e._e(),e.showReferenceColumns?t("el-table-column",{attrs:{label:"克隆音频文本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-input",{attrs:{placeholder:"这里是克隆音频对应文本"},model:{value:s.row.referenceText,callback:function(t){e.$set(s.row,"referenceText",t)},expression:"scope.row.referenceText"}}):t("span",[e._v(e._s(s.row.referenceText))])]}}],null,!1,1416385909)}):e._e(),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.editing?t("el-button",{staticClass:"save-Tts",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.saveEdit(s.row)}}},[e._v("保存 ")]):[t("el-button",{staticClass:"edit-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.startEdit(s.row)}}},[e._v(" 编辑 ")]),t("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteRow(s.row)}}},[e._v(" 删除 ")])]]}}])})],1)],1),t("div",{ref:"scrollbar",staticClass:"custom-scrollbar"},[t("div",{ref:"scrollbarTrack",staticClass:"custom-scrollbar-track",on:{click:e.handleTrackClick}},[t("div",{ref:"scrollbarThumb",staticClass:"custom-scrollbar-thumb",on:{mousedown:e.startDrag}})])])]),t("div",{staticClass:"action-buttons"},[t("el-button",{staticStyle:{background:"#606ff3",border:"None"},attrs:{type:"primary",size:"mini"},on:{click:e.toggleSelectAll}},[e._v(" "+e._s(e.selectAll?"取消全选":"全选")+" ")]),t("el-button",{staticStyle:{background:"#5bc98c",border:"None"},attrs:{type:"primary",size:"mini"},on:{click:e.addNew}},[e._v(" 新增 ")]),t("el-button",{staticStyle:{background:"red",border:"None"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.deleteRow(e.filteredTtsModels.filter((e=>e.selected)))}}},[e._v("删除 ")])],1)])}),[],!1,null,"2aa92eee",null).exports,h=s(9145),g={components:{HeaderBar:r.A,ModelEditDialog:d,TtsModel:p,AddModelDialog:o,VersionFooter:h.A},data(){return{addDialogVisible:!1,activeTab:"llm",search:"",editDialogVisible:!1,editModelData:{},ttsDialogVisible:!1,selectedTtsModelId:"",modelList:[],pageSizeOptions:[10,20,50,100],currentPage:1,pageSize:10,total:0,selectedModels:[],isAllSelected:!1,loading:!1,selectedModelConfig:{}}},created(){this.loadData()},computed:{modelTypeText(){return{vad:"语言活动检测模型(VAD)",asr:"语音识别模型(ASR)",llm:"大语言模型（LLM）",vllm:"视觉大模型（VLLM）",intent:"意图识别模型(Intent)",tts:"语音合成模型(TTS)",memory:"记忆模型(Memory)"}[this.activeTab]||"模型配置"},pageCount(){return Math.ceil(this.total/this.pageSize)},visiblePages(){const e=[];let t=Math.max(1,this.currentPage-1),s=Math.min(this.pageCount,t+3-1);s-t+1<3&&(t=Math.max(1,s-3+1));for(let a=t;a<=s;a++)e.push(a);return e}},methods:{handlePageSizeChange(e){this.pageSize=e,this.currentPage=1,this.loadData()},openTtsDialog(e){this.selectedTtsModelId=e.id,this.selectedModelConfig=e,this.ttsDialogVisible=!0},headerCellClassName({column:e,columnIndex:t}){return 0===t?"custom-selection-header":""},handleMenuSelect(e){this.activeTab=e,this.currentPage=1,this.pageSize=10,this.loadData()},handleSearch(){this.currentPage=1,this.loadData()},batchDelete(){0!==this.selectedModels.length?this.$confirm("确定要删除选中的模型吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=this.selectedModels.map((e=>new Promise((t=>{a.A.model.deleteModel(e.id,(({data:e})=>t(0===e.code)))}))));Promise.all(e).then((e=>{e.every(Boolean)?(this.$message.success({message:"批量删除成功",showClose:!0}),this.loadData()):this.$message.error({message:"部分删除失败",showClose:!0})}))})).catch((()=>{this.$message.info("已取消删除")})):this.$message.warning("请先选择要删除的模型")},addModel(){this.addDialogVisible=!0},editModel(e){this.editModelData=JSON.parse(JSON.stringify(e)),this.editDialogVisible=!0},deleteModel(e){this.$confirm("确定要删除该模型吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.A.model.deleteModel(e.id,(({data:e})=>{0===e.code?(this.$message.success({message:"删除成功",showClose:!0}),this.loadData()):this.$message.error({message:e.msg||"删除失败",showClose:!0})}))})).catch((()=>{this.$message.info("已取消删除")}))},handleCurrentChange(e){this.currentPage=e,this.$refs.modelTable.clearSelection()},handleModelSave({provideCode:e,formData:t,done:s}){const i=this.activeTab,l=t.id;a.A.model.updateModel({modelType:i,provideCode:e,id:l,formData:t},(({data:e})=>{0===e.code?(this.$message.success("保存成功"),this.loadData(),this.editDialogVisible=!1):this.$message.error(e.msg||"保存失败"),s&&s()}))},selectAll(){this.isAllSelected?this.$refs.modelTable.clearSelection():this.$refs.modelTable.toggleAllSelection()},handleSelectionChange(e){this.selectedModels=e,this.isAllSelected=e.length===this.modelList.length,0===e.length&&(this.isAllSelected=!1)},handleAddConfirm(e){const t={modelType:this.activeTab,provideCode:e.provideCode,formData:{...e,isDefault:e.isDefault?1:0,isEnabled:e.isEnabled?1:0,configJson:e.configJson}};a.A.model.addModel(t,(({data:e})=>{0===e.code?(this.$message.success({message:"新增成功",showClose:!0}),this.loadData()):this.$message.error({message:e.msg||"新增失败",showClose:!0})}))},goFirst(){this.currentPage=1,this.loadData()},goPrev(){this.currentPage>1&&(this.currentPage--,this.loadData())},goNext(){this.currentPage<this.pageCount&&(this.currentPage++,this.loadData())},goToPage(e){this.currentPage=e,this.loadData()},loadData(){this.loading=!0;const e={modelType:this.activeTab,modelName:this.search,page:this.currentPage,limit:this.pageSize};a.A.model.getModelList(e,(({data:e})=>{this.loading=!1,0===e.code?(this.modelList=e.data.list,this.total=e.data.total):this.$message.error(e.msg||"获取模型列表失败")}))},handleStatusChange(e){const t=e.isEnabled?1:0,s=e.isEnabled;e.isEnabled=!e.isEnabled,a.A.model.updateModelStatus(e.id,t,(({data:a})=>{0===a.code?(this.$message.success(1===t?"启用成功":"禁用成功"),e.isEnabled=t):(e.isEnabled=s,this.$message.error(a.msg||"操作失败"))}))},handleDefaultChange(e){a.A.model.setDefaultModel(e.id,(({data:e})=>{0===e.code&&(this.$message.success("设置默认模型成功"),this.loadData())}))}}},f=(0,l.A)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"welcome"},[t("HeaderBar"),t("div",{staticClass:"operation-bar"},[t("h2",{staticClass:"page-title"},[e._v(e._s(e.modelTypeText))]),t("div",{staticClass:"action-group"},[t("div",{staticClass:"search-group"},[t("el-input",{staticClass:"search-input",staticStyle:{width:"240px"},attrs:{placeholder:"请输入模型名称查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("el-button",{staticClass:"btn-search",on:{click:e.handleSearch}},[e._v(" 搜索 ")])],1)])]),t("div",{staticClass:"main-wrapper"},[t("div",{staticClass:"content-panel"},[t("el-menu",{staticClass:"nav-panel",staticStyle:{"background-size":"cover","background-position":"center"},attrs:{"default-active":e.activeTab},on:{select:e.handleMenuSelect}},[t("el-menu-item",{attrs:{index:"vad"}},[t("span",{staticClass:"menu-text"},[e._v("语言活动检测")])]),t("el-menu-item",{attrs:{index:"asr"}},[t("span",{staticClass:"menu-text"},[e._v("语音识别")])]),t("el-menu-item",{attrs:{index:"llm"}},[t("span",{staticClass:"menu-text"},[e._v("大语言模型")])]),t("el-menu-item",{attrs:{index:"vllm"}},[t("span",{staticClass:"menu-text"},[e._v("视觉大模型")])]),t("el-menu-item",{attrs:{index:"intent"}},[t("span",{staticClass:"menu-text"},[e._v("意图识别")])]),t("el-menu-item",{attrs:{index:"tts"}},[t("span",{staticClass:"menu-text"},[e._v("语音合成")])]),t("el-menu-item",{attrs:{index:"memory"}},[t("span",{staticClass:"menu-text"},[e._v("记忆")])])],1),t("div",{staticClass:"content-area"},[t("el-card",{staticClass:"model-card",attrs:{shadow:"never"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"modelTable",staticClass:"data-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.7)","header-cell-style":{background:"transparent"},data:e.modelList,"header-row-class-name":"table-header","header-cell-class-name":e.headerCellClassName},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{label:"模型ID",prop:"id",align:"center"}}),t("el-table-column",{attrs:{label:"模型名称",prop:"modelName",align:"center"}}),t("el-table-column",{attrs:{label:"提供商",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.configJson.type||"未知")+" ")]}}])}),t("el-table-column",{attrs:{label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{staticClass:"custom-switch",attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleStatusChange(s.row)}},model:{value:s.row.isEnabled,callback:function(t){e.$set(s.row,"isEnabled",t)},expression:"scope.row.isEnabled"}})]}}])}),t("el-table-column",{attrs:{label:"是否默认",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{staticClass:"custom-switch",attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleDefaultChange(s.row)}},model:{value:s.row.isDefault,callback:function(t){e.$set(s.row,"isDefault",t)},expression:"scope.row.isDefault"}})]}}])}),"tts"===e.activeTab?t("el-table-column",{attrs:{label:"音色管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{staticClass:"voice-management-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.openTtsDialog(s.row)}}},[e._v(" 音色管理 ")])]}}],null,!1,2043358805)}):e._e(),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{staticClass:"edit-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.editModel(s.row)}}},[e._v(" 修改 ")]),t("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteModel(s.row)}}},[e._v(" 删除 ")])]}}])})],1),t("div",{staticClass:"table-footer"},[t("div",{staticClass:"batch-actions"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.selectAll}},[e._v(" "+e._s(e.isAllSelected?"取消全选":"全选")+" ")]),t("el-button",{staticClass:"add-btn",attrs:{type:"success",size:"mini"},on:{click:e.addModel}},[e._v(" 新增 ")]),t("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v(" 删除 ")])],1),t("div",{staticClass:"custom-pagination"},[t("el-select",{staticClass:"page-size-select",on:{change:e.handlePageSizeChange},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l(e.pageSizeOptions,(function(e){return t("el-option",{key:e,attrs:{label:`${e}条/页`,value:e}})})),1),t("button",{staticClass:"pagination-btn",attrs:{disabled:1===e.currentPage},on:{click:e.goFirst}},[e._v("首页")]),t("button",{staticClass:"pagination-btn",attrs:{disabled:1===e.currentPage},on:{click:e.goPrev}},[e._v("上一页")]),e._l(e.visiblePages,(function(s){return t("button",{key:s,staticClass:"pagination-btn",class:{active:s===e.currentPage},on:{click:function(t){return e.goToPage(s)}}},[e._v(" "+e._s(s)+" ")])})),t("button",{staticClass:"pagination-btn",attrs:{disabled:e.currentPage===e.pageCount},on:{click:e.goNext}},[e._v("下一页")]),t("span",{staticClass:"total-text"},[e._v("共"+e._s(e.total)+"条记录")])],2)])],1)],1)],1),t("ModelEditDialog",{attrs:{modelType:e.activeTab,visible:e.editDialogVisible,modelData:e.editModelData},on:{"update:visible":function(t){e.editDialogVisible=t},save:e.handleModelSave}}),t("TtsModel",{attrs:{visible:e.ttsDialogVisible,ttsModelId:e.selectedTtsModelId,modelConfig:e.selectedModelConfig},on:{"update:visible":function(t){e.ttsDialogVisible=t}}}),t("AddModelDialog",{attrs:{modelType:e.activeTab,visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t},confirm:e.handleAddConfirm}})],1),t("el-footer",[t("version-footer")],1)],1)}),[],!1,null,"3f29e0d2",null),v=f.exports},9145:function(e,t,s){s.d(t,{A:function(){return i}});var a={name:"VersionFooter",computed:{...(0,s(5353).aH)({version:e=>e.pubConfig.version,name:e=>e.pubConfig.name,beianIcpNum:e=>e.pubConfig.beianIcpNum,beianGaNum:e=>e.pubConfig.beianGaNum,year:e=>e.pubConfig.year})},mounted(){this.$store.dispatch("fetchPubConfig")}},i=(0,s(1656).A)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"copyright"},[t("div",{staticClass:"footer-content"},[t("span",[e._v(e._s(e.year)+" "+e._s(e.name)+" "+e._s(e.version))]),"null"!==e.beianGaNum?["null"!==e.beianIcpNum||e.name?t("span",[e._v("|")]):e._e(),t("a",{staticClass:"beian-link",attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="+e.beianGaNum,target:"_blank",rel:"noopener"}},[t("img",{staticClass:"beian-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAACXlBMVEUAAADax4rGxqP556zmsVD/6KXu5JvwvFPglEFnY3nnpEjosU1+XFTmuVfu13Hrv1jpsFa1k3mne2HlvnPdqmPqz3fu3YrJoWv04J/mz5z246aSi3i2p2/0zGj82WDrtFjar1O7klO4dkfimUJcWnbho0rgr1vntFfmvFflvGOZdFKXZkOUemnmv2XkuWWVe2ziqlXnt1Tr0HDpwl6ObmCkbEKqhVyOc2jdoVHmuljfrmDq0nPapWDUnErqy3XjtWXesXLrzHjz34rqzYfmw3fy4YrqyYDevW/dzoTIhkndsXLRsIneuHjlyIzQroTjuXjlyYfktWvw2prhvoHTmGfx45j3773TuYT/25LdijyKf321oXU+Nm3cumXfuWLtwlzpwVz40FvpvlvqvFfouFXjrlHipEjcmEfknEXPbzfbZyzZQR/YMBrWKBrhJhLdHxDTGg5HV4xBT4YYKYaWk4SDgYIWIYBybH0qLn1KS3tlZHpNS3WGfHIcHXEwLHAnF28rKW07NGuzn2pNQ2ruzWnDrGnuy2jryGjAnGgoH2j1x2RCNGPcrmIsEGGQdl/pu17YtV7FoV3muVxoRVzWqFvSmVp2SVbyw1XbkVTuvFPfo1PgmVPpt1LcnFLWkVLlp1F7W1HpsU92QE5oMUtFAUrpqUjnjUFOAEHUgz+DUj14FzvbczieMTdhATfodjXWcDXcbjXVcTS/Xi/hay7WXS3cWS3vYyvaVSrUVymnJSjXSyeKDSbNSiWfHCPMTyLFQiHkSR/lPxvVLRrPLBnUJRfUHhbaJxXVGxTZJxPNFhBdOhm/AAAAWXRSTlMABQIU/hIJ/v79/Pj29PPx4cC6s7CNfmxZWRv+/v7+/v7+/v78/Pr6+fPz8vHq6ujl5eTj4ODe2NTQzMW6ubKsnJeQkJCJiIOBgX9ubGpoW1lMREM0JR8dDgvYx1gAAAE7SURBVBjTYgADJmZJQUFJZiYGOGD2EzLV1jIT8paCibCJ86zctGPD1D4ecUaICKuPyYLMYznZOfNqzP0jwEJBOt1KB4/mHjqZ3dGsHwxW5M4Zk5l/PPdIQcGMShUPVqBlgQLlMSvyDq+P3HVidjWnkQQTA5MXV1SFYtb+jZGrl02si2J3Y2JgFMmILl68efueLVvXLSqLXirCCBgDow1HT+GS/AP7srblLS+K5bIHCjmodpXUr929d+eaVb3SsuouQCHhufPjShsbJk/rrK2KW8hiBxRyVkvnkI9tnaDQJDNFOU1DDOjRMEfe9Mjpiewz5RIzZmmKMoPcKqGbkJqSkBSfnDqpXS+ACeRpJ76W/uSUpDlpLPFtfK5soLAKFbU05Odm4eblN7YWk4KEGWOIp62FgYCVsG84SAAAL7BaooX965sAAAAASUVORK5CYII=",alt:"备案图标"}}),t("span",{staticClass:"beian-text"},[e._v(e._s(e.beianGaNum))])])]:e._e(),"null"!==e.beianIcpNum?[e.name?t("span",[e._v("|")]):e._e(),t("a",{staticClass:"beian-link",attrs:{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"}},[t("span",{staticClass:"beian-text"},[e._v(e._s(e.beianIcpNum))])])]:e._e()],2)])}),[],!1,null,"1bdde94e",null).exports}}]);