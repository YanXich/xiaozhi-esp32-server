"use strict";(self.webpackChunkxiaozhi=self.webpackChunkxiaozhi||[]).push([[728],{6727:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var i=a(7853),s=a(9145),l={name:"FactoryDialog",props:{visible:{type:Boolean,required:!0},data:{type:Object,default:()=>({})}},data(){return{saving:!1,dialogVisible:!1,formData:{id:void 0,name:"",code:"",country:"",status:0}}},computed:{editMode(){return!!this.data.id}},watch:{visible(e){this.dialogVisible=e,e&&this.editMode?this.formData={...this.data}:this.resetForm()}},methods:{handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e)},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},confirm(){this.saving=!0;try{if(!this.formData.name)return this.$message.warning("请输入工厂名称"),void(this.saving=!1);if(!this.formData.code)return this.$message.warning("请输入工厂编号"),void(this.saving=!1);if(!this.formData.country)return this.$message.warning("请输入国家"),void(this.saving=!1);this.$emit("save",{...this.formData}),this.$emit("update:visible",!1)}catch(e){console.error(e),this.$message.error("保存失败")}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={id:void 0,name:"",code:"",country:"",status:0}}}},r=a(1656),o=(0,r.A)(l,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"50%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" "+e._s(e.editMode?"编辑工厂":"添加工厂")+" ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"工厂名称",prop:"name"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入工厂名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"工厂编号",prop:"code"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入工厂编号"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"国家",prop:"country"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入国家编号(如86)"},model:{value:e.formData.country,callback:function(t){e.$set(e.formData,"country",t)},expression:"formData.country"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"状态",prop:"status"}},[t("el-select",{staticClass:"custom-select custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[t("el-option",{attrs:{label:"启用",value:0}}),t("el-option",{attrs:{label:"禁用",value:1}})],1)],1)],1)])],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,"29e35a31",null).exports,c={name:"CarModelDialog",props:{visible:{type:Boolean,required:!0},data:{type:Object,default:()=>({})}},data(){return{saving:!1,dialogVisible:!1,formData:{description:"",commandConfig:""}}},computed:{editMode(){return!!this.data.id}},watch:{visible(e){this.dialogVisible=e,e&&this.editMode?this.formData={...this.data}:this.resetForm()}},methods:{handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e)},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},confirm(){this.saving=!0;try{this.$emit("save",{...this.formData}),this.$emit("update:visible",!1)}catch(e){console.error(e)}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={description:"",commandConfig:""}}}},n=(0,r.A)(c,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"50%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" "+e._s(e.editMode?"编辑车型配置":"添加车型配置")+" ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入描述"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),t("el-form-item",{attrs:{label:"指令配置",prop:"commandConfig"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入指令配置"},model:{value:e.formData.commandConfig,callback:function(t){e.$set(e.formData,"commandConfig",t)},expression:"formData.commandConfig"}})],1)],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,"814c678a",null).exports,d={name:"ProductionBatchDialog",props:{visible:{type:Boolean,required:!0},data:{type:Object,default:()=>({})}},data(){return{saving:!1,dialogVisible:!1,formData:{factoryId:null,modelType:"",productionDate:"",hardwareVersion:"",agentCode:"",status:0,startSerialNumber:null,endSerialNumber:null}}},computed:{editMode(){return!!this.data.id}},watch:{visible(e){this.dialogVisible=e,e?this.editMode?this.formData={...this.data}:(this.resetForm(),this.data.factoryId&&(this.formData.factoryId=this.data.factoryId)):this.resetForm()}},methods:{handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e)},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},confirm(){this.saving=!0;try{if(null!==this.formData.startSerialNumber&&null!==this.formData.endSerialNumber&&this.formData.startSerialNumber>=this.formData.endSerialNumber)return this.$message.error("开始序号必须小于结束序号"),void(this.saving=!1);this.$emit("save",{...this.formData}),this.$emit("update:visible",!1)}catch(e){console.error(e)}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={factoryId:null,modelType:"",productionDate:"",hardwareVersion:"",agentCode:"",status:0,startSerialNumber:null,endSerialNumber:null}}}},u=(0,r.A)(d,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"50%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" "+e._s(e.editMode?"编辑生产批次":"添加生产批次")+" ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"工厂ID",prop:"factoryId"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入工厂ID",disabled:e.editMode},model:{value:e.formData.factoryId,callback:function(t){e.$set(e.formData,"factoryId",e._n(t))},expression:"formData.factoryId"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"型号",prop:"modelType"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入型号",disabled:e.editMode},model:{value:e.formData.modelType,callback:function(t){e.$set(e.formData,"modelType",t)},expression:"formData.modelType"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"生产日期",prop:"productionDate"}},[t("el-date-picker",{staticClass:"custom-input-bg",staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择生产日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:e.editMode},model:{value:e.formData.productionDate,callback:function(t){e.$set(e.formData,"productionDate",t)},expression:"formData.productionDate"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"硬件版本",prop:"hardwareVersion"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入硬件版本",disabled:e.editMode},model:{value:e.formData.hardwareVersion,callback:function(t){e.$set(e.formData,"hardwareVersion",t)},expression:"formData.hardwareVersion"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"代理商编码",prop:"agentCode"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入代理商编码",disabled:e.editMode},model:{value:e.formData.agentCode,callback:function(t){e.$set(e.formData,"agentCode",t)},expression:"formData.agentCode"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"状态",prop:"status"}},[t("el-select",{staticClass:"custom-select custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态",disabled:e.editMode},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[t("el-option",{attrs:{label:"待生产",value:0}}),t("el-option",{attrs:{label:"生产中",value:1}}),t("el-option",{attrs:{label:"已生产",value:2}}),t("el-option",{attrs:{label:"已作废",value:3}})],1)],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"开始序号",prop:"startSerialNumber"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入开始序号",disabled:e.editMode},model:{value:e.formData.startSerialNumber,callback:function(t){e.$set(e.formData,"startSerialNumber",e._n(t))},expression:"formData.startSerialNumber"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"结束序号",prop:"endSerialNumber"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入结束序号",disabled:e.editMode},model:{value:e.formData.endSerialNumber,callback:function(t){e.$set(e.formData,"endSerialNumber",e._n(t))},expression:"formData.endSerialNumber"}})],1)],1)])],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,"0b73edbc",null).exports,m={name:"DeviceNumberDialog",props:{visible:{type:Boolean,required:!0},data:{type:Object,default:()=>({})}},data(){return{saving:!1,dialogVisible:!1,formData:{batchId:"",deviceNumber:"",status:1}}},computed:{editMode(){return!!this.data.id}},watch:{visible(e){this.dialogVisible=e,e&&this.editMode?this.formData={...this.data}:this.resetForm()}},methods:{handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e)},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},confirm(){this.saving=!0;try{this.$emit("save",{...this.formData}),this.$emit("update:visible",!1)}catch(e){console.error(e)}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={batchId:"",deviceNumber:"",status:1}}}},h=(0,r.A)(m,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"50%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" "+e._s(e.editMode?"编辑设备号":"添加设备号")+" ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"批次ID",prop:"batchId"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入批次ID"},model:{value:e.formData.batchId,callback:function(t){e.$set(e.formData,"batchId",t)},expression:"formData.batchId"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"设备号",prop:"deviceNumber"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入设备号"},model:{value:e.formData.deviceNumber,callback:function(t){e.$set(e.formData,"deviceNumber",t)},expression:"formData.deviceNumber"}})],1)],1),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-select",{staticClass:"custom-select custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[t("el-option",{attrs:{label:"已生成",value:1}}),t("el-option",{attrs:{label:"其他",value:0}})],1)],1)],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,"0438e29a",null).exports,p={name:"DeviceMacDialog",props:{visible:{type:Boolean,required:!0},data:{type:Object,default:()=>({})}},data(){return{saving:!1,dialogVisible:!1,formData:{deviceNumber:"",macAddress:"",carModel:"",userId:null,deviceName:"",remark:"",status:1}}},computed:{editMode(){return!!this.data.id}},watch:{visible(e){this.dialogVisible=e,e&&this.editMode?this.formData={...this.data}:this.resetForm()}},methods:{handleVisibleChange(e){this.dialogVisible=e,this.$emit("update:visible",e)},handleClose(){this.saving=!1,this.$emit("update:visible",!1)},confirm(){this.saving=!0;try{this.$emit("save",{...this.formData}),this.$emit("update:visible",!1)}catch(e){console.error(e)}finally{this.saving=!1}},resetForm(){this.saving=!1,this.formData={deviceNumber:"",macAddress:"",carModel:"",userId:null,deviceName:"",remark:"",status:1}}}},b=(0,r.A)(p,(function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"center-dialog",attrs:{visible:e.dialogVisible,width:"50%",center:"","custom-class":"custom-dialog","show-close":!1},on:{"update:visible":e.handleVisibleChange}},[t("div",{staticStyle:{margin:"0 18px","text-align":"left",padding:"10px","border-radius":"10px"}},[t("div",{staticStyle:{"font-size":"30px",color:"#3d4566","margin-top":"-10px","margin-bottom":"10px","text-align":"center"}},[e._v(" "+e._s(e.editMode?"编辑设备MAC":"添加设备MAC")+" ")]),t("button",{staticClass:"custom-close-btn",on:{click:e.handleClose}},[e._v(" × ")]),t("div",{staticStyle:{height:"2px",background:"#e9e9e9","margin-bottom":"22px"}}),t("el-form",{staticClass:"custom-form",attrs:{model:e.formData,"label-width":"100px","label-position":"left"}},[t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"设备号",prop:"deviceNumber"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入设备号"},model:{value:e.formData.deviceNumber,callback:function(t){e.$set(e.formData,"deviceNumber",t)},expression:"formData.deviceNumber"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"MAC地址",prop:"macAddress"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入MAC地址"},model:{value:e.formData.macAddress,callback:function(t){e.$set(e.formData,"macAddress",t)},expression:"formData.macAddress"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"车型",prop:"carModel"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入车型"},model:{value:e.formData.carModel,callback:function(t){e.$set(e.formData,"carModel",t)},expression:"formData.carModel"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"设备名称",prop:"deviceName"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入设备名称"},model:{value:e.formData.deviceName,callback:function(t){e.$set(e.formData,"deviceName",t)},expression:"formData.deviceName"}})],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"用户ID",prop:"userId"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入用户ID"},model:{value:e.formData.userId,callback:function(t){e.$set(e.formData,"userId",t)},expression:"formData.userId"}})],1),t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"状态",prop:"status"}},[t("el-select",{staticClass:"custom-input-bg",staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[t("el-option",{attrs:{label:"启用",value:1}}),t("el-option",{attrs:{label:"禁用",value:0}})],1)],1)],1),t("div",{staticStyle:{display:"flex",gap:"20px","margin-bottom":"0"}},[t("el-form-item",{staticStyle:{flex:"1"},attrs:{label:"备注",prop:"remark"}},[t("el-input",{staticClass:"custom-input-bg",attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)])],1),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.confirm}},[e._v(" 保存 ")])],1)])}),[],!1,null,"580b8a93",null).exports,g=a(9237),v=a(5173),f={getFactories(e,t){const a=new URLSearchParams(e).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/factories?${a}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取参数列表失败:",a),v.A.reAjaxFun((()=>{this.getFactories(e,t)}))})).send()},createFactory(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/factory`).method("POST").data(e).success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("创建工厂失败:",a),v.A.reAjaxFun((()=>{this.createFactory(e,t)}))})).send()},updateFactory(e,t,a){v.A.sendRequest().url(`${(0,g.p)()}/device-management/factory/${e}`).method("PUT").data(t).success((e=>{v.A.clearRequestTime(),a(e)})).networkFail((i=>{console.error("更新工厂失败:",i),v.A.reAjaxFun((()=>{this.updateFactory(e,t,a)}))})).send()},getCarModels(e,t){const a=new URLSearchParams(e).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/car-models?${a}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取车型配置列表失败:",a),v.A.reAjaxFun((()=>{this.getCarModels(e,t)}))})).send()},createCarModel(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/car-model`).method("POST").data(e).success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("创建车型配置失败:",a),v.A.reAjaxFun((()=>{this.createCarModel(e,t)}))})).send()},updateCarModel(e,t,a){v.A.sendRequest().url(`${(0,g.p)()}/device-management/car-model/${e}`).method("PUT").data(t).success((e=>{v.A.clearRequestTime(),a(e)})).networkFail((i=>{console.error("更新车型配置失败:",i),v.A.reAjaxFun((()=>{this.updateCarModel(e,t,a)}))})).send()},deleteCarModel(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/car-model/${e}`).method("DELETE").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("删除车型配置失败:",a),v.A.reAjaxFun((()=>{this.deleteCarModel(e,t)}))})).send()},getProductionBatches(e,t){const a=new URLSearchParams(e).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/batches?${a}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取生产批次列表失败:",a),v.A.reAjaxFun((()=>{this.getProductionBatches(e,t)}))})).send()},createProductionBatch(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/batch`).method("POST").data(e).success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("创建生产批次失败:",a),v.A.reAjaxFun((()=>{this.createProductionBatch(e,t)}))})).send()},getDeviceNumbersByBatch(e,t,a){const i=new URLSearchParams(t).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-numbers/${e}?${i}`).method("GET").success((e=>{v.A.clearRequestTime(),a(e)})).networkFail((i=>{console.error("获取设备号列表失败:",i),v.A.reAjaxFun((()=>{this.getDeviceNumbers(e,t,a)}))})).send()},getDeviceNumbers(e,t){const a=new URLSearchParams(e).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-numbers?${a}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取设备号列表失败:",a),v.A.reAjaxFun((()=>{this.getDeviceNumbers(e,t)}))})).send()},updateDeviceNumberStatus(e,t,a){v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-number/${e}/status/${t}`).method("PUT").success((e=>{v.A.clearRequestTime(),a(e)})).networkFail((i=>{console.error("更新设备号状态失败:",i),v.A.reAjaxFun((()=>{this.updateDeviceNumberStatus(e,t,a)}))})).send()},getDeviceConfigs(e,t){const a=new URLSearchParams(e).toString();v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-macs?${a}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取设备MAC列表失败:",a),v.A.reAjaxFun((()=>{this.getDeviceConfigs(e,t)}))})).send()},createDeviceConfig(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-mac`).method("POST").data(e).success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("创建设备MAC失败:",a),v.A.reAjaxFun((()=>{this.createDeviceConfig(e,t)}))})).send()},getDeviceConfigById(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-mac/${e}`).method("GET").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("获取设备MAC详情失败:",a),v.A.reAjaxFun((()=>{this.getDeviceConfigById(e,t)}))})).send()},updateDeviceConfig(e,t,a){v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-mac/${e}`).method("PUT").data(t).success((e=>{v.A.clearRequestTime(),a(e)})).networkFail((i=>{console.error("更新设备MAC失败:",i),v.A.reAjaxFun((()=>{this.updateDeviceConfig(e,t,a)}))})).send()},deleteDeviceConfig(e,t){v.A.sendRequest().url(`${(0,g.p)()}/device-management/device-mac/${e}`).method("DELETE").success((e=>{v.A.clearRequestTime(),t(e)})).networkFail((a=>{console.error("删除设备MAC失败:",a),v.A.reAjaxFun((()=>{this.deleteDeviceConfig(e,t)}))})).send()}},y={components:{HeaderBar:i.A,VersionFooter:s.A,FactoryDialog:o,CarModelDialog:n,ProductionBatchDialog:u,DeviceNumberDialog:h,DeviceMacDialog:b},data(){return{factoryDialogVisible:!1,carModelDialogVisible:!1,batchDialogVisible:!1,deviceNumberDialogVisible:!1,deviceMacDialogVisible:!1,devicesDialogVisible:!1,batchesDialogVisible:!1,activeTab:"factory",search:"",searchDeviceNumber:"",searchMacAddress:"",searchDeviceName:"",searchFactoryId:"",searchStatus:"",searchStartDate:"",searchHardwareVersion:"",searchModelType:"",editData:{},dataList:[],deviceNumbersList:[],batchesList:[],devicesLoading:!1,batchesLoading:!1,pageSizeOptions:[10,20,50,100],currentPage:1,pageSize:10,total:0,selectedItems:[],isAllSelected:!1,loading:!1,deviceSearchKeyword:"",batchDialogTitle:"批次列表"}},created(){this.loadData()},computed:{activeTabText(){return{factory:"工厂管理","car-model":"车型配置","production-batch":"生产批次","device-number":"设备号管理","device-mac":"设备MAC管理"}[this.activeTab]||"设备配置"},pageCount(){return Math.ceil(this.total/this.pageSize)},visiblePages(){const e=[];let t=Math.max(1,this.currentPage-1),a=Math.min(this.pageCount,t+3-1);a-t+1<3&&(t=Math.max(1,a-3+1));for(let i=t;i<=a;i++)e.push(i);return e},filteredDeviceNumbersList(){return this.deviceSearchKeyword?this.deviceNumbersList.filter((e=>e.deviceNumber.includes(this.deviceSearchKeyword))):this.deviceNumbersList}},methods:{handlePageSizeChange(e){this.pageSize=e,this.currentPage=1,this.loadData()},headerCellClassName({column:e,columnIndex:t}){return 0===t?"custom-selection-header":""},handleMenuSelect(e){this.activeTab=e,this.currentPage=1,this.pageSize=10,"device-mac"!==this.activeTab?this.search="":(this.searchDeviceNumber="",this.searchMacAddress="",this.searchDeviceName=""),"production-batch"===this.activeTab&&(this.searchFactoryId="",this.searchStatus="",this.searchStartDate="",this.searchHardwareVersion="",this.searchModelType=""),this.loadData()},handleSearch(){this.currentPage=1,this.loadData()},batchDelete(){0!==this.selectedItems.length?this.$confirm("确定要删除选中的项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$message.success("批量删除成功"),this.loadData()})).catch((()=>{this.$message.info("已取消删除")})):this.$message.warning("请先选择要删除的项")},addItem(){this.editData={},this.openDialog(this.activeTab)},editItem(e){this.editData=JSON.parse(JSON.stringify(e)),this.openDialog(this.activeTab)},deleteItem(e){this.$confirm("确定要删除该项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{"car-model"===this.activeTab?f.deleteCarModel(e.id,(e=>{0===e.data.code?(this.$message.success("删除成功"),this.loadData()):this.$message.error(e.data.msg||"删除失败")})):"device-mac"===this.activeTab?f.deleteDeviceConfig(e.id,(e=>{0===e.data.code?(this.$message.success("删除成功"),this.loadData()):this.$message.error(e.data.msg||"删除失败")})):(this.$message.success("删除成功"),this.loadData())})).catch((()=>{this.$message.info("已取消删除")}))},openDialog(e){switch(this.factoryDialogVisible=!1,this.carModelDialogVisible=!1,this.batchDialogVisible=!1,this.deviceNumberDialogVisible=!1,this.deviceMacDialogVisible=!1,e){case"factory":this.factoryDialogVisible=!0;break;case"car-model":this.carModelDialogVisible=!0;break;case"production-batch":this.batchDialogVisible=!0;break;case"device-number":this.deviceNumberDialogVisible=!0;break;case"device-mac":this.deviceMacDialogVisible=!0}},createBatch(e){this.editData={factoryId:e.id,modelType:"",productionDate:"",hardwareVersion:"",agentCode:"",status:0,startSerialNumber:null,endSerialNumber:null},this.batchDialogTitle=`创建批次 - ${e.name}`,this.openDialog("production-batch")},handleCurrentChange(e){this.currentPage=e,this.$refs.deviceTable.clearSelection()},handleSave(e){"factory"===this.activeTab?e.factoryId?f.createProductionBatch(e,(e=>{0===e.data.code?(this.$message.success("创建成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"创建失败")})):e.id?f.updateFactory(e.id,e,(e=>{0===e.data.code?(this.$message.success("更新成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"更新失败")})):f.createFactory(e,(e=>{0===e.data.code?(this.$message.success("创建成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"创建失败")})):"car-model"===this.activeTab?e.id?f.updateCarModel(e.id,e,(e=>{0===e.data.code?(this.$message.success("更新成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"更新失败")})):f.createCarModel(e,(e=>{0===e.data.code?(this.$message.success("创建成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"创建失败")})):"production-batch"===this.activeTab?e.id?(this.$message.success("更新成功"),this.openDialog(""),this.loadData()):f.createProductionBatch(e,(e=>{0===e.data.code?(this.$message.success("创建成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"创建失败")})):"device-number"===this.activeTab?(this.$message.success("保存成功"),this.openDialog(""),this.loadData()):"device-mac"===this.activeTab&&(e.id?f.updateDeviceConfig(e.id,e,(e=>{0===e.data.code?(this.$message.success("更新成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"更新失败")})):f.createDeviceConfig(e,(e=>{0===e.data.code?(this.$message.success("创建成功"),this.openDialog(""),this.loadData()):this.$message.error(e.data.msg||"创建失败")})))},selectAll(){this.isAllSelected?this.$refs.deviceTable.clearSelection():this.$refs.deviceTable.toggleAllSelection()},handleSelectionChange(e){this.selectedItems=e,this.isAllSelected=e.length===this.dataList.length,0===e.length&&(this.isAllSelected=!1)},goFirst(){this.currentPage=1,this.loadData()},goPrev(){this.currentPage>1&&(this.currentPage--,this.loadData())},goNext(){this.currentPage<this.pageCount&&(this.currentPage++,this.loadData())},goToPage(e){this.currentPage=e,this.loadData()},loadData(){if(this.loading=!0,"factory"===this.activeTab){const e={page:this.currentPage,limit:this.pageSize,name:this.search};f.getFactories(e,(e=>{0===e.data.code?(this.dataList=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取工厂数据失败"),this.loading=!1}))}else if("car-model"===this.activeTab){const e={page:this.currentPage,limit:this.pageSize,name:this.search};f.getCarModels(e,(e=>{0===e.data.code?(this.dataList=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取车型配置数据失败"),this.loading=!1}))}else if("production-batch"===this.activeTab){const e={page:this.currentPage,limit:this.pageSize,factoryId:this.searchFactoryId,status:this.searchStatus,productionDate:this.searchStartDate,hardwareVersion:this.searchHardwareVersion,modelType:this.searchModelType};f.getProductionBatches(e,(e=>{0===e.data.code?(this.dataList=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取生产批次数据失败"),this.loading=!1}))}else if("device-number"===this.activeTab){const e={page:this.currentPage,limit:this.pageSize,name:this.search};f.getDeviceNumbers(e,(e=>{0===e.data.code?(this.dataList=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取设备号数据失败"),this.loading=!1}))}else if("device-mac"===this.activeTab){const e={page:this.currentPage,limit:this.pageSize,deviceNumber:this.searchDeviceNumber.trim(),macAddress:this.searchMacAddress.trim(),deviceName:this.searchDeviceName.trim()};f.getDeviceConfigs(e,(e=>{0===e.data.code?(this.dataList=e.data.data.list,this.total=e.data.data.total):this.$message.error(e.data.msg||"获取设备MAC数据失败"),this.loading=!1}))}else setTimeout((()=>{this.dataList=[];for(let e=0;e<this.pageSize;e++){const t=(this.currentPage-1)*this.pageSize+e;"device-config"===this.activeTab&&this.dataList.push({id:t+1,name:`配置项${t+1}`,value:"값{index + 1}"})}this.total=100,this.loading=!1}),500)},updateDeviceStatus(e){f.updateDeviceNumberStatus(e.id,e.status,(t=>{if(0===t.data.code){this.$message.success("状态更新成功");const t=this.deviceNumbersList.findIndex((t=>t.id===e.id));-1!==t&&this.deviceNumbersList.splice(t,1,{...e})}else{this.$message.error(t.data.msg||"状态更新失败");const a=this.deviceNumbersList.find((t=>t.id===e.id));a&&(a.status=e.originalStatus)}}))},viewDeviceNumbers(e){this.devicesLoading=!0,this.devicesDialogVisible=!0,this.deviceNumbersList=[],this.deviceSearchKeyword="";f.getDeviceNumbersByBatch(e.id,{page:1,limit:1e3},(e=>{0===e.data.code?(console.log("resp data list: ",e.data.data.list),this.deviceNumbersList=e.data.data.list||[],console.log("deviceNumbersList len333",this.deviceNumbersList.length),this.deviceNumbersList.forEach((e=>{e.originalStatus=e.status}))):this.$message.error(e.data.msg||"获取设备号列表失败"),this.devicesLoading=!1})),console.log("deviceNumbersList444",this.deviceNumbersList.length)},handleDevicesDialogClose(e){},handleBatchesDialogClose(e){},viewBatches(e){this.batchesLoading=!0,this.batchesDialogVisible=!0,this.batchesList=[],this.batchDialogTitle=`批次列表 - ${e.name}`;const t={factoryId:e.id,page:1,limit:1e4};f.getProductionBatches(t,(e=>{0===e.data.code?this.batchesList=e.data.data.list||[]:this.$message.error(e.data.msg||"获取批次列表失败"),this.batchesLoading=!1}))},exportDeviceNumbers(){if(!this.deviceNumbersList||0===this.deviceNumbersList.length)return void this.$message.warning("没有设备号可以导出");const e=this.deviceNumbersList.map((e=>e.deviceNumber)).join("\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="device_numbers.txt",a.click(),URL.revokeObjectURL(a.href),this.$message.success("导出成功")}}},D=(0,r.A)(y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"welcome"},[t("HeaderBar"),t("div",{staticClass:"operation-bar"},[t("h2",{staticClass:"page-title"},[e._v(e._s(e.activeTabText))]),t("div",{staticClass:"action-group"},["device-mac"!==e.activeTab&&"production-batch"!==e.activeTab?t("div",{staticClass:"search-group"},[t("el-input",{staticClass:"search-input",staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("el-button",{staticClass:"btn-search",on:{click:e.handleSearch}},[e._v(" 搜索 ")])],1):"device-mac"===e.activeTab?t("div",{staticClass:"search-group"},[t("el-input",{staticClass:"search-input",staticStyle:{width:"150px"},attrs:{placeholder:"设备号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchDeviceNumber,callback:function(t){e.searchDeviceNumber=t},expression:"searchDeviceNumber"}}),t("el-input",{staticClass:"search-input",staticStyle:{width:"150px"},attrs:{placeholder:"MAC地址",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchMacAddress,callback:function(t){e.searchMacAddress=t},expression:"searchMacAddress"}}),t("el-input",{staticClass:"search-input",staticStyle:{width:"150px"},attrs:{placeholder:"设备名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchDeviceName,callback:function(t){e.searchDeviceName=t},expression:"searchDeviceName"}}),t("el-button",{staticClass:"btn-search",on:{click:e.handleSearch}},[e._v(" 搜索 ")])],1):"production-batch"===e.activeTab?t("div",{staticClass:"search-group"},[t("el-input",{staticClass:"search-input",staticStyle:{width:"120px"},attrs:{placeholder:"工厂ID",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchFactoryId,callback:function(t){e.searchFactoryId=t},expression:"searchFactoryId"}}),t("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"状态",clearable:""},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},[t("el-option",{attrs:{label:"待生产",value:"0"}}),t("el-option",{attrs:{label:"生产中",value:"1"}}),t("el-option",{attrs:{label:"已生产",value:"2"}}),t("el-option",{attrs:{label:"已作废",value:"9"}})],1),t("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",placeholder:"开始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.searchStartDate,callback:function(t){e.searchStartDate=t},expression:"searchStartDate"}}),t("el-input",{staticClass:"search-input",staticStyle:{width:"120px"},attrs:{placeholder:"硬件版本",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchHardwareVersion,callback:function(t){e.searchHardwareVersion=t},expression:"searchHardwareVersion"}}),t("el-input",{staticClass:"search-input",staticStyle:{width:"120px"},attrs:{placeholder:"车型ID",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchModelType,callback:function(t){e.searchModelType=t},expression:"searchModelType"}}),t("el-button",{staticClass:"btn-search",on:{click:e.handleSearch}},[e._v(" 搜索 ")])],1):e._e()])]),t("div",{staticClass:"main-wrapper"},[t("div",{staticClass:"content-panel"},[t("el-menu",{staticClass:"nav-panel",staticStyle:{"background-size":"cover","background-position":"center"},attrs:{"default-active":e.activeTab},on:{select:e.handleMenuSelect}},[t("el-menu-item",{attrs:{index:"factory"}},[t("span",{staticClass:"menu-text"},[e._v("工厂管理")])]),t("el-menu-item",{attrs:{index:"car-model"}},[t("span",{staticClass:"menu-text"},[e._v("车型配置")])]),t("el-menu-item",{attrs:{index:"production-batch"}},[t("span",{staticClass:"menu-text"},[e._v("生产批次")])]),t("el-menu-item",{attrs:{index:"device-number"}},[t("span",{staticClass:"menu-text"},[e._v("设备号管理")])]),t("el-menu-item",{attrs:{index:"device-mac"}},[t("span",{staticClass:"menu-text"},[e._v("设备MAC管理")])])],1),t("div",{staticClass:"content-area"},[t("el-card",{staticClass:"model-card",attrs:{shadow:"never"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"deviceTable",staticClass:"data-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.7)","header-cell-style":{background:"transparent"},data:e.dataList,"header-row-class-name":"table-header","header-cell-class-name":e.headerCellClassName},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),"factory"===e.activeTab?t("el-table-column",{attrs:{label:"工厂名称",prop:"name",align:"center"}}):e._e(),"factory"===e.activeTab?t("el-table-column",{attrs:{label:"工厂编号",prop:"code",align:"center"}}):e._e(),"factory"===e.activeTab?t("el-table-column",{attrs:{label:"国家",prop:"country",align:"center"}}):e._e(),"factory"===e.activeTab?t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:0===a.row.status?"success":"info"}},[e._v(" "+e._s(0===a.row.status?"启用":"禁用")+" ")])]}}],null,!1,300232587)}):e._e(),"car-model"===e.activeTab?t("el-table-column",{attrs:{label:"车型ID",prop:"id",align:"center"}}):e._e(),"car-model"===e.activeTab?t("el-table-column",{attrs:{label:"描述",prop:"description",align:"center"}}):e._e(),"car-model"===e.activeTab?t("el-table-column",{attrs:{label:"指令配置",prop:"commandConfig",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"工厂ID",prop:"factoryId",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"型号",prop:"modelType",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"生产日期",prop:"productionDate",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"硬件版本",prop:"hardwareVersion",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"代理商编码",prop:"agentCode",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"开始序号",prop:"startSerialNumber",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"结束序号",prop:"endSerialNumber",align:"center"}}):e._e(),"production-batch"===e.activeTab?t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.info}},[e._v(" "+e._s(0===a.row.status?"待生产":1===a.row.status?"生产中":2===a.row.status?"已生产":9===a.row.status?"已作废":"其他")+" ")])]}}],null,!1,1376181663)}):e._e(),"device-number"===e.activeTab?t("el-table-column",{attrs:{label:"批次ID",prop:"batchId",align:"center"}}):e._e(),"device-number"===e.activeTab?t("el-table-column",{attrs:{label:"设备号",prop:"deviceNumber",align:"center"}}):e._e(),"device-number"===e.activeTab?t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.info}},[e._v(" "+e._s(1===a.row.status?"已生成":0===a.row.status?"已送厂":2===a.row.status?"已生产":3===a.row.status?"已交付":4===a.row.status?"已绑定":9===a.row.status?"已作废":"其他")+" ")])]}}],null,!1,829987595)}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"设备号",prop:"deviceNumber",align:"center"}}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"MAC地址",prop:"macAddress",align:"center"}}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"车型",prop:"carModel",align:"center"}}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"设备名称",prop:"deviceName",align:"center"}}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center"}}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:1===a.row.status?"success":"info"}},[e._v(" "+e._s(1===a.row.status?"启用":"禁用")+" ")])]}}],null,!1,3946830891)}):e._e(),"device-mac"===e.activeTab?t("el-table-column",{attrs:{label:"创建时间",prop:"createDate",align:"center"}}):e._e(),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"edit-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.editItem(a.row)}}},[e._v(" 修改 ")]),t("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteItem(a.row)}}},[e._v(" 删除 ")]),"factory"===e.activeTab?t("el-button",{staticClass:"batch-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.createBatch(a.row)}}},[e._v(" 创建批次 ")]):e._e(),"factory"===e.activeTab?t("el-button",{staticClass:"view-batches-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.viewBatches(a.row)}}},[e._v(" 查看批次 ")]):e._e(),"production-batch"===e.activeTab?t("el-button",{staticClass:"view-devices-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.viewDeviceNumbers(a.row)}}},[e._v(" 查看设备号 ")]):e._e()]}}])})],1),t("div",{staticClass:"table-footer"},[t("div",{staticClass:"batch-actions"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.selectAll}},[e._v(" "+e._s(e.isAllSelected?"取消全选":"全选")+" ")]),t("el-button",{staticClass:"add-btn",attrs:{type:"success",size:"mini"},on:{click:e.addItem}},[e._v(" 新增 ")]),t("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v(" 删除 ")])],1),t("div",{staticClass:"custom-pagination"},[t("el-select",{staticClass:"page-size-select",on:{change:e.handlePageSizeChange},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l(e.pageSizeOptions,(function(e){return t("el-option",{key:e,attrs:{label:`${e}条/页`,value:e}})})),1),t("button",{staticClass:"pagination-btn",attrs:{disabled:1===e.currentPage},on:{click:e.goFirst}},[e._v("首页")]),t("button",{staticClass:"pagination-btn",attrs:{disabled:1===e.currentPage},on:{click:e.goPrev}},[e._v("上一页")]),e._l(e.visiblePages,(function(a){return t("button",{key:a,staticClass:"pagination-btn",class:{active:a===e.currentPage},on:{click:function(t){return e.goToPage(a)}}},[e._v(" "+e._s(a)+" ")])})),t("button",{staticClass:"pagination-btn",attrs:{disabled:e.currentPage===e.pageCount},on:{click:e.goNext}},[e._v("下一页")]),t("span",{staticClass:"total-text"},[e._v("共"+e._s(e.total)+"条记录")])],2)])],1)],1)],1),t("FactoryDialog",{attrs:{visible:e.factoryDialogVisible,data:e.editData},on:{"update:visible":function(t){e.factoryDialogVisible=t},save:e.handleSave}}),t("CarModelDialog",{attrs:{visible:e.carModelDialogVisible,data:e.editData},on:{"update:visible":function(t){e.carModelDialogVisible=t},save:e.handleSave}}),t("ProductionBatchDialog",{attrs:{visible:e.batchDialogVisible,data:e.editData},on:{"update:visible":function(t){e.batchDialogVisible=t},save:e.handleSave}}),t("DeviceNumberDialog",{attrs:{visible:e.deviceNumberDialogVisible,data:e.editData},on:{"update:visible":function(t){e.deviceNumberDialogVisible=t},save:e.handleSave}}),t("DeviceMacDialog",{attrs:{visible:e.deviceMacDialogVisible,data:e.editData},on:{"update:visible":function(t){e.deviceMacDialogVisible=t},save:e.handleSave}}),t("el-dialog",{attrs:{title:"设备号列表",visible:e.devicesDialogVisible,width:"60%"},on:{"update:visible":function(t){e.devicesDialogVisible=t}}},[t("div",{staticClass:"device-search-bar",staticStyle:{"margin-bottom":"15px"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备号进行搜索",clearable:""},model:{value:e.deviceSearchKeyword,callback:function(t){e.deviceSearchKeyword=t},expression:"deviceSearchKeyword"}})],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.devicesLoading,expression:"devicesLoading"}],staticStyle:{width:"100%"},attrs:{data:e.filteredDeviceNumbersList,height:"400"}},[t("el-table-column",{attrs:{prop:"deviceNumber",label:"设备号"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:function(t){return e.updateDeviceStatus(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}},[t("el-option",{attrs:{label:"已生成",value:0}}),t("el-option",{attrs:{label:"已送厂",value:1}}),t("el-option",{attrs:{label:"已生产",value:2}}),t("el-option",{attrs:{label:"已交付",value:3}}),t("el-option",{attrs:{label:"已绑定",value:4}}),t("el-option",{attrs:{label:"已作废",value:9}})],1)]}}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.exportDeviceNumbers}},[e._v("导出TXT")]),t("el-button",{on:{click:function(t){e.devicesDialogVisible=!1}}},[e._v("关闭")])],1)],1),t("el-dialog",{attrs:{title:e.batchDialogTitle,visible:e.batchesDialogVisible,width:"70%"},on:{"update:visible":function(t){e.batchesDialogVisible=t}}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.batchesLoading,expression:"batchesLoading"}],staticStyle:{width:"100%"},attrs:{data:e.batchesList,height:"400","default-sort":{prop:"productionDate",order:"descending"}}},[t("el-table-column",{attrs:{prop:"factoryId",label:"工厂ID",align:"center"}}),t("el-table-column",{attrs:{prop:"modelType",label:"型号",align:"center"}}),t("el-table-column",{attrs:{prop:"productionDate",label:"生产日期",align:"center",sortable:""}}),t("el-table-column",{attrs:{prop:"hardwareVersion",label:"硬件版本",align:"center"}}),t("el-table-column",{attrs:{prop:"agentCode",label:"代理商编码",align:"center"}}),t("el-table-column",{attrs:{prop:"startSerialNumber",label:"开始序号",align:"center"}}),t("el-table-column",{attrs:{prop:"endSerialNumber",label:"结束序号",align:"center"}}),t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.info}},[e._v(" "+e._s(0===a.row.status?"待生产":1===a.row.status?"生产中":2===a.row.status?"已生产":9===a.row.status?"已作废":"其他")+" ")])]}}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.batchesDialogVisible=!1}}},[e._v("关闭")])],1)],1)],1),t("el-footer",[t("version-footer")],1)],1)}),[],!1,null,"4a4c93cc",null),x=D.exports},9145:function(e,t,a){a.d(t,{A:function(){return s}});var i={name:"VersionFooter",computed:{...(0,a(5353).aH)({version:e=>e.pubConfig.version,name:e=>e.pubConfig.name,beianIcpNum:e=>e.pubConfig.beianIcpNum,beianGaNum:e=>e.pubConfig.beianGaNum,year:e=>e.pubConfig.year})},mounted(){this.$store.dispatch("fetchPubConfig")}},s=(0,a(1656).A)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"copyright"},[t("div",{staticClass:"footer-content"},[t("span",[e._v(e._s(e.year)+" "+e._s(e.name)+" "+e._s(e.version))]),"null"!==e.beianGaNum?["null"!==e.beianIcpNum||e.name?t("span",[e._v("|")]):e._e(),t("a",{staticClass:"beian-link",attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="+e.beianGaNum,target:"_blank",rel:"noopener"}},[t("img",{staticClass:"beian-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAACXlBMVEUAAADax4rGxqP556zmsVD/6KXu5JvwvFPglEFnY3nnpEjosU1+XFTmuVfu13Hrv1jpsFa1k3mne2HlvnPdqmPqz3fu3YrJoWv04J/mz5z246aSi3i2p2/0zGj82WDrtFjar1O7klO4dkfimUJcWnbho0rgr1vntFfmvFflvGOZdFKXZkOUemnmv2XkuWWVe2ziqlXnt1Tr0HDpwl6ObmCkbEKqhVyOc2jdoVHmuljfrmDq0nPapWDUnErqy3XjtWXesXLrzHjz34rqzYfmw3fy4YrqyYDevW/dzoTIhkndsXLRsIneuHjlyIzQroTjuXjlyYfktWvw2prhvoHTmGfx45j3773TuYT/25LdijyKf321oXU+Nm3cumXfuWLtwlzpwVz40FvpvlvqvFfouFXjrlHipEjcmEfknEXPbzfbZyzZQR/YMBrWKBrhJhLdHxDTGg5HV4xBT4YYKYaWk4SDgYIWIYBybH0qLn1KS3tlZHpNS3WGfHIcHXEwLHAnF28rKW07NGuzn2pNQ2ruzWnDrGnuy2jryGjAnGgoH2j1x2RCNGPcrmIsEGGQdl/pu17YtV7FoV3muVxoRVzWqFvSmVp2SVbyw1XbkVTuvFPfo1PgmVPpt1LcnFLWkVLlp1F7W1HpsU92QE5oMUtFAUrpqUjnjUFOAEHUgz+DUj14FzvbczieMTdhATfodjXWcDXcbjXVcTS/Xi/hay7WXS3cWS3vYyvaVSrUVymnJSjXSyeKDSbNSiWfHCPMTyLFQiHkSR/lPxvVLRrPLBnUJRfUHhbaJxXVGxTZJxPNFhBdOhm/AAAAWXRSTlMABQIU/hIJ/v79/Pj29PPx4cC6s7CNfmxZWRv+/v7+/v7+/v78/Pr6+fPz8vHq6ujl5eTj4ODe2NTQzMW6ubKsnJeQkJCJiIOBgX9ubGpoW1lMREM0JR8dDgvYx1gAAAE7SURBVBjTYgADJmZJQUFJZiYGOGD2EzLV1jIT8paCibCJ86zctGPD1D4ecUaICKuPyYLMYznZOfNqzP0jwEJBOt1KB4/mHjqZ3dGsHwxW5M4Zk5l/PPdIQcGMShUPVqBlgQLlMSvyDq+P3HVidjWnkQQTA5MXV1SFYtb+jZGrl02si2J3Y2JgFMmILl68efueLVvXLSqLXirCCBgDow1HT+GS/AP7srblLS+K5bIHCjmodpXUr929d+eaVb3SsuouQCHhufPjShsbJk/rrK2KW8hiBxRyVkvnkI9tnaDQJDNFOU1DDOjRMEfe9Mjpiewz5RIzZmmKMoPcKqGbkJqSkBSfnDqpXS+ACeRpJ76W/uSUpDlpLPFtfK5soLAKFbU05Odm4eblN7YWk4KEGWOIp62FgYCVsG84SAAAL7BaooX965sAAAAASUVORK5CYII=",alt:"备案图标"}}),t("span",{staticClass:"beian-text"},[e._v(e._s(e.beianGaNum))])])]:e._e(),"null"!==e.beianIcpNum?[e.name?t("span",[e._v("|")]):e._e(),t("a",{staticClass:"beian-link",attrs:{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"}},[t("span",{staticClass:"beian-text"},[e._v(e._s(e.beianIcpNum))])])]:e._e()],2)])}),[],!1,null,"1bdde94e",null).exports}}]);