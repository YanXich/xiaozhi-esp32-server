"use strict";(self.webpackChunkxiaozhi=self.webpackChunkxiaozhi||[]).push([[145],{3410:function(e,a,t){t.d(a,{A:function(){return l}});var s={props:{title:{type:String,default:"新增参数"},visible:{type:Boolean,default:!1},form:{type:Object,default:()=>({id:null,paramCode:"",paramValue:"",valueType:"string",remark:""})}},data(){return{dialogKey:Date.now(),saving:!1,valueTypeOptions:[{value:"string",label:"字符串(string)"},{value:"number",label:"数字(number)"},{value:"boolean",label:"布尔值(boolean)"},{value:"array",label:"数组(array)"},{value:"json",label:"JSON对象(json)"}],rules:{paramCode:[{required:!0,message:"请输入参数编码",trigger:"blur"}],paramValue:[{required:!0,message:"请输入参数值",trigger:"blur"}],valueType:[{required:!0,message:"请选择值类型",trigger:"change"}]}}},methods:{submit(){this.$refs.form.validate((e=>{e&&(this.saving=!0,this.$emit("submit",{form:this.form,done:()=>{this.saving=!1}}),setTimeout((()=>{this.saving=!1}),3e3))}))},cancel(){this.saving=!1,this.$emit("cancel")}},watch:{visible(e){e&&(this.dialogKey=Date.now())}}},l=(0,t(1656).A)(s,(function(){var e=this,a=e._self._c;return a("el-dialog",{key:e.dialogKey,staticClass:"param-dialog-wrapper",attrs:{title:e.title,visible:e.visible,width:"520px","append-to-body":!0,"close-on-click-modal":!1,"custom-class":"custom-param-dialog","show-close":!1},on:{"update:visible":function(a){e.visible=a}}},[a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"dialog-header"},[a("h2",{staticClass:"dialog-title"},[e._v(e._s(e.title))]),a("button",{staticClass:"custom-close-btn",on:{click:e.cancel}},[a("svg",{attrs:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M13 1L1 13M1 1L13 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}})])])]),a("el-form",{ref:"form",staticClass:"param-form",attrs:{model:e.form,rules:e.rules,"label-width":"110px","label-position":"left"}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"参数编码",prop:"paramCode"}},[a("el-input",{staticClass:"custom-input",attrs:{placeholder:"请输入参数编码"},model:{value:e.form.paramCode,callback:function(a){e.$set(e.form,"paramCode",a)},expression:"form.paramCode"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"参数值",prop:"paramValue"}},[a("el-input",{staticClass:"custom-input",attrs:{placeholder:"请输入参数值"},model:{value:e.form.paramValue,callback:function(a){e.$set(e.form,"paramValue",a)},expression:"form.paramValue"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"值类型",prop:"valueType"}},[a("el-select",{staticClass:"custom-select",attrs:{placeholder:"请选择值类型"},model:{value:e.form.valueType,callback:function(a){e.$set(e.form,"valueType",a)},expression:"form.valueType"}},e._l(e.valueTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"form-item remark-item",attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"custom-textarea",attrs:{type:"textarea",placeholder:"请输入备注",rows:3},model:{value:e.form.remark,callback:function(a){e.$set(e.form,"remark",a)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.saving,disabled:e.saving},on:{click:e.submit}},[e._v(" 保存 ")]),a("el-button",{staticClass:"cancel-btn",on:{click:e.cancel}},[e._v(" 取消 ")])],1)],1)])}),[],!1,null,"47e7f12d",null).exports},7738:function(e,a,t){t.r(a),t.d(a,{default:function(){return o}});var s=t(9237),l=t(7853),r=t(3410),i=t(9145),n={components:{HeaderBar:l.A,ParamDialog:r.A,VersionFooter:i.A},data(){return{paramsList:[],actionMap:{restart:{value:"restart",title:"重启服务端",message:"确定要重启服务端吗？",confirmText:"重启"},update_config:{value:"update_config",title:"更新配置",message:"确定要更新配置吗？",confirmText:"更新"}},currentPage:1,loading:!1,pageSize:10,pageSizeOptions:[10,20,50,100],total:0,dialogVisible:!1,dialogTitle:"新增参数",isAllSelected:!1,sensitive_keys:["api_key","personal_access_token","access_token","token","secret","access_key_secret","secret_key"],paramForm:{id:null,paramCode:"",paramValue:"",remark:""}}},created(){this.fetchParams()},computed:{pageCount(){return Math.ceil(this.total/this.pageSize)},visiblePages(){const e=[];let a=Math.max(1,this.currentPage-1),t=Math.min(this.pageCount,a+3-1);t-a+1<3&&(a=Math.max(1,t-3+1));for(let s=a;s<=t;s++)e.push(s);return e}},methods:{handlePageSizeChange(e){this.pageSize=e,this.currentPage=1,this.fetchParams()},fetchParams(){this.loading=!0,s.A.admin.getWsServerList({},(({data:e})=>{this.loading=!1,0===e.code?(this.paramsList=e.data.map((e=>({address:e}))),this.total=e.data.length):this.$message.error({message:e.msg||"获取参数列表失败",showClose:!0})}))},emitAction(e,a){void 0!==a&&void 0!==e.address&&this.$confirm(a.message,a.title,{confirmButtonText:a.confirmText}).then((()=>{s.A.admin.sendWsServerAction({targetWs:e.address,action:a.value},(({data:e})=>{0===e.code?this.$message.success({message:`${a.title}成功`,showClose:!0}):this.$message.error({message:e.msg||"操作失败",showClose:!0})}))}))},headerCellClassName({columnIndex:e}){return 0===e?"custom-selection-header":""}}},o=(0,t(1656).A)(n,(function(){var e=this,a=e._self._c;return a("div",{staticClass:"welcome"},[a("HeaderBar"),e._m(0),a("div",{staticClass:"main-wrapper"},[a("div",{staticClass:"content-panel"},[a("div",{staticClass:"content-area"},[a("el-card",{staticClass:"params-card",attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"paramsTable",staticClass:"transparent-table",attrs:{data:e.paramsList,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.7)","header-cell-class-name":e.headerCellClassName}},[a("el-table-column",{attrs:{label:"选择",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.selected,callback:function(a){e.$set(t.row,"selected",a)},expression:"scope.row.selected"}})]}}])}),a("el-table-column",{attrs:{label:"ws地址",prop:"address",align:"center"}}),a("el-table-column",{attrs:{label:"操作",prop:"operator",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){return e.emitAction(t.row,e.actionMap.restart)}}},[e._v("重启")]),a("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){return e.emitAction(t.row,e.actionMap.update_config)}}},[e._v("更新配置")])]}}])})],1)],1)],1)])]),a("el-footer",[a("version-footer")],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"operation-bar"},[e("h2",{staticClass:"page-title"},[this._v("服务端管理")])])}],!1,null,"6b09e16e",null).exports},9145:function(e,a,t){t.d(a,{A:function(){return l}});var s={name:"VersionFooter",computed:{...(0,t(5353).aH)({version:e=>e.pubConfig.version,name:e=>e.pubConfig.name,beianIcpNum:e=>e.pubConfig.beianIcpNum,beianGaNum:e=>e.pubConfig.beianGaNum,year:e=>e.pubConfig.year})},mounted(){this.$store.dispatch("fetchPubConfig")}},l=(0,t(1656).A)(s,(function(){var e=this,a=e._self._c;return a("div",{staticClass:"copyright"},[a("div",{staticClass:"footer-content"},[a("span",[e._v(e._s(e.year)+" "+e._s(e.name)+" "+e._s(e.version))]),"null"!==e.beianGaNum?["null"!==e.beianIcpNum||e.name?a("span",[e._v("|")]):e._e(),a("a",{staticClass:"beian-link",attrs:{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode="+e.beianGaNum,target:"_blank",rel:"noopener"}},[a("img",{staticClass:"beian-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAACXlBMVEUAAADax4rGxqP556zmsVD/6KXu5JvwvFPglEFnY3nnpEjosU1+XFTmuVfu13Hrv1jpsFa1k3mne2HlvnPdqmPqz3fu3YrJoWv04J/mz5z246aSi3i2p2/0zGj82WDrtFjar1O7klO4dkfimUJcWnbho0rgr1vntFfmvFflvGOZdFKXZkOUemnmv2XkuWWVe2ziqlXnt1Tr0HDpwl6ObmCkbEKqhVyOc2jdoVHmuljfrmDq0nPapWDUnErqy3XjtWXesXLrzHjz34rqzYfmw3fy4YrqyYDevW/dzoTIhkndsXLRsIneuHjlyIzQroTjuXjlyYfktWvw2prhvoHTmGfx45j3773TuYT/25LdijyKf321oXU+Nm3cumXfuWLtwlzpwVz40FvpvlvqvFfouFXjrlHipEjcmEfknEXPbzfbZyzZQR/YMBrWKBrhJhLdHxDTGg5HV4xBT4YYKYaWk4SDgYIWIYBybH0qLn1KS3tlZHpNS3WGfHIcHXEwLHAnF28rKW07NGuzn2pNQ2ruzWnDrGnuy2jryGjAnGgoH2j1x2RCNGPcrmIsEGGQdl/pu17YtV7FoV3muVxoRVzWqFvSmVp2SVbyw1XbkVTuvFPfo1PgmVPpt1LcnFLWkVLlp1F7W1HpsU92QE5oMUtFAUrpqUjnjUFOAEHUgz+DUj14FzvbczieMTdhATfodjXWcDXcbjXVcTS/Xi/hay7WXS3cWS3vYyvaVSrUVymnJSjXSyeKDSbNSiWfHCPMTyLFQiHkSR/lPxvVLRrPLBnUJRfUHhbaJxXVGxTZJxPNFhBdOhm/AAAAWXRSTlMABQIU/hIJ/v79/Pj29PPx4cC6s7CNfmxZWRv+/v7+/v7+/v78/Pr6+fPz8vHq6ujl5eTj4ODe2NTQzMW6ubKsnJeQkJCJiIOBgX9ubGpoW1lMREM0JR8dDgvYx1gAAAE7SURBVBjTYgADJmZJQUFJZiYGOGD2EzLV1jIT8paCibCJ86zctGPD1D4ecUaICKuPyYLMYznZOfNqzP0jwEJBOt1KB4/mHjqZ3dGsHwxW5M4Zk5l/PPdIQcGMShUPVqBlgQLlMSvyDq+P3HVidjWnkQQTA5MXV1SFYtb+jZGrl02si2J3Y2JgFMmILl68efueLVvXLSqLXirCCBgDow1HT+GS/AP7srblLS+K5bIHCjmodpXUr929d+eaVb3SsuouQCHhufPjShsbJk/rrK2KW8hiBxRyVkvnkI9tnaDQJDNFOU1DDOjRMEfe9Mjpiewz5RIzZmmKMoPcKqGbkJqSkBSfnDqpXS+ACeRpJ76W/uSUpDlpLPFtfK5soLAKFbU05Odm4eblN7YWk4KEGWOIp62FgYCVsG84SAAAL7BaooX965sAAAAASUVORK5CYII=",alt:"备案图标"}}),a("span",{staticClass:"beian-text"},[e._v(e._s(e.beianGaNum))])])]:e._e(),"null"!==e.beianIcpNum?[e.name?a("span",[e._v("|")]):e._e(),a("a",{staticClass:"beian-link",attrs:{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"}},[a("span",{staticClass:"beian-text"},[e._v(e._s(e.beianIcpNum))])])]:e._e()],2)])}),[],!1,null,"1bdde94e",null).exports}}]);